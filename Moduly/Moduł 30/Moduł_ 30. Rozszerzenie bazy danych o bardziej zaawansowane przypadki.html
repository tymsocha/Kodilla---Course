<!DOCTYPE html>
<!-- saved from url=(0050)https://kodilla.com/pl/bootcamp-module/146/97/3774 -->
<html lang="pl" class=""><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="x-ua-compatible" content="ie=edge">
<meta name="csrf-token" content="UEQ0DnTV3pJGOF99iqxR5zs4sHkJbEJh1BUH7QLJ">

<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="https://kodilla.com/static/img/icons/apple-touch-icon-60x60.png?00000">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="https://kodilla.com/static/img/icons/apple-touch-icon-76x76.png?00000">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="https://kodilla.com/static/img/icons/apple-touch-icon-120x120.png?00000">
<link rel="apple-touch-icon" type="image/png" sizes="152x152" href="https://kodilla.com/static/img/icons/apple-touch-icon-152x152.png?00000">
<link rel="icon" type="image/png" sizes="32x32" href="https://kodilla.com/static/img/icons/favicon-32x32.png?00000">
<link rel="icon" type="image/png" sizes="96x96" href="https://kodilla.com/static/img/icons/favicon-96x96.png?00000">
<link rel="icon" type="image/png" sizes="16x16" href="https://kodilla.com/static/img/icons/favicon-16x16.png?00000">

<link rel="canonical" href="https://kodilla.com/pl/bootcamp-module/146/97/3774">

    <meta name="robots" content="noindex, follow">
        <title>    Moduł: 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki
</title>
                <script src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/sdk.js.pobrane" async="" crossorigin="anonymous"></script><script type="text/javascript" async="" src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/js"></script><script src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/prism.js.pobrane" async=""></script><script id="facebook-jssdk" src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/sdk.js(1).pobrane"></script><script type="text/javascript" async="" src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/analytics.js.pobrane"></script><script type="text/javascript" async="" src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/analytics.js.pobrane"></script><script async="" src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/gtm.js.pobrane"></script><script async="" src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/fbevents.js.pobrane"></script><script>document.documentElement.classList.remove("no-js")</script>
<script src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/yall.min.js.pobrane"></script>
<link href="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/bootstrap.min.css" rel="stylesheet">
<link href="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/font-awesome.min.css" rel="stylesheet">
<link href="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/main-dc3f1a8ace.css" rel="stylesheet" type="text/css">
                
    <link href="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/prism.min.css" rel="stylesheet">

    <link href="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/bootcamp-da6dc13ed8.css" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/perfect-scrollbar.css">
    <link rel="stylesheet" href="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/jquery.fancybox.min.css" type="text/css" media="screen">
        <script>
    document.addEventListener("DOMContentLoaded", yall);
    window.environment = 'production';
    window.loggedIn = true;
    window.domain = 'https://kodilla.com';
            window.fbAppId = 1449248938627896;
    window.chatService = 'FreshChat';
    window.useMessenger = window.chatService === 'Messenger';
    window.locale = 'pl';
    window.lang = 'pl';

    window.serverUTC       = 1556649275000;
    window.serverOffset    = 120;
    window.userDate        = new Date();
    window.userUTC         = userDate.getTime();
    window.userOffset      = userDate.getTimezoneOffset() * (-1);
    window.userClockDiff   = userUTC - serverUTC;
    window.diffRounded     = Math.round( userClockDiff / ( 1000 * 60 * 15 ) );
    window.isDifferentZone = ( userOffset - serverOffset !== 0 ) ? 1 : 0;
    window.hasWrongTime    = ( diffRounded !== 0 ) ? 1 : 0;
    window.dateTooltipText = 'Data i godzina są podane dla Twojej strefy czasowej GMT. <br>W razie wątpliwości napisz: <u>support@kodilla.com</u>.';
    window.wrongHourNotice = 'Godzina na Twoim urządzeniu r&oacute;żni się od godziny obowiązującej w strefie czasowej wybranej w ustawieniach Twojego urządzenia.';

    var moment = undefined,
        momentReady = function( method, method2, count ){
            var c = ( count ) ? count : 0;

            if      ( isDifferentZone && moment !== undefined ){
                if      ( method ) { method(); }
                else    { return false; }
            }
            else if ( isDifferentZone && moment === undefined ) {
                if ( c < 20 ) {
                    c++;
                    setTimeout( function() { momentReady( method, method2, c ); }
                        , 300 );
                } else {
                    if      ( method2 === true && method )  { method(); }
                    else if ( method2 !== true && method2 ) { method2(); }
                }
            }
            else {
                if      ( method2 === true && method )  { method(); }
                else if ( method2 !== true && method2 ) { method2(); }
                else    { return false; }
            }
        };

    if ( window.isDifferentZone && moment === undefined ) {
        var script = document.createElement("script");
        script.type = "text/javascript";
        script.src = '/static/js/libs/moment.timezone.locales.min.js?v=2.22.2';
        document.getElementsByTagName("head")[0].appendChild(script);
    }
</script>
        <!-- Facebook Pixel Code -->
    <script>
        !function(f,b,e,v,n,t,s)
        {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
            n.callMethod.apply(n,arguments):n.queue.push(arguments)};
            if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
            n.queue=[];t=b.createElement(e);t.async=!0;
            t.src=v;s=b.getElementsByTagName(e)[0];
            s.parentNode.insertBefore(t,s)}(window, document,'script',
            'https://connect.facebook.net/en_US/fbevents.js');
        fbq('init', 389137334769464 );
        fbq('track', 'PageView');
    </script>
    <!-- End Facebook Pixel Code -->

    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
            j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
            'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
        })(window,document,'script','dataLayer','GTM-KN2WWBH');</script>
    <!-- End Google Tag Manager -->
    <script type="text/javascript" charset="utf-8" src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/saved_resource"></script><link href="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/widget.css" rel="stylesheet"><style type="text/css">.fancybox-margin{margin-right:17px;}</style><style type="text/css">.fb_hidden{position:absolute;top:-10000px;z-index:10001}.fb_reposition{overflow:hidden;position:relative}.fb_invisible{display:none}.fb_reset{background:none;border:0;border-spacing:0;color:#000;cursor:auto;direction:ltr;font-family:"lucida grande", tahoma, verdana, arial, sans-serif;font-size:11px;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:1;margin:0;overflow:visible;padding:0;text-align:left;text-decoration:none;text-indent:0;text-shadow:none;text-transform:none;visibility:visible;white-space:normal;word-spacing:normal}.fb_reset>div{overflow:hidden}@keyframes fb_transform{from{opacity:0;transform:scale(.95)}to{opacity:1;transform:scale(1)}}.fb_animate{animation:fb_transform .3s forwards}
.fb_dialog{background:rgba(82, 82, 82, .7);position:absolute;top:-10000px;z-index:10001}.fb_dialog_advanced{border-radius:8px;padding:10px}.fb_dialog_content{background:#fff;color:#373737}.fb_dialog_close_icon{background:url(https://static.xx.fbcdn.net/rsrc.php/v3/yq/r/IE9JII6Z1Ys.png) no-repeat scroll 0 0 transparent;cursor:pointer;display:block;height:15px;position:absolute;right:18px;top:17px;width:15px}.fb_dialog_mobile .fb_dialog_close_icon{left:5px;right:auto;top:5px}.fb_dialog_padding{background-color:transparent;position:absolute;width:1px;z-index:-1}.fb_dialog_close_icon:hover{background:url(https://static.xx.fbcdn.net/rsrc.php/v3/yq/r/IE9JII6Z1Ys.png) no-repeat scroll 0 -15px transparent}.fb_dialog_close_icon:active{background:url(https://static.xx.fbcdn.net/rsrc.php/v3/yq/r/IE9JII6Z1Ys.png) no-repeat scroll 0 -30px transparent}.fb_dialog_iframe{line-height:0}.fb_dialog_content .dialog_title{background:#6d84b4;border:1px solid #365899;color:#fff;font-size:14px;font-weight:bold;margin:0}.fb_dialog_content .dialog_title>span{background:url(https://static.xx.fbcdn.net/rsrc.php/v3/yd/r/Cou7n-nqK52.gif) no-repeat 5px 50%;float:left;padding:5px 0 7px 26px}body.fb_hidden{height:100%;left:0;margin:0;overflow:visible;position:absolute;top:-10000px;transform:none;width:100%}.fb_dialog.fb_dialog_mobile.loading{background:url(https://static.xx.fbcdn.net/rsrc.php/v3/ya/r/3rhSv5V8j3o.gif) white no-repeat 50% 50%;min-height:100%;min-width:100%;overflow:hidden;position:absolute;top:0;z-index:10001}.fb_dialog.fb_dialog_mobile.loading.centered{background:none;height:auto;min-height:initial;min-width:initial;width:auto}.fb_dialog.fb_dialog_mobile.loading.centered #fb_dialog_loader_spinner{width:100%}.fb_dialog.fb_dialog_mobile.loading.centered .fb_dialog_content{background:none}.loading.centered #fb_dialog_loader_close{clear:both;color:#fff;display:block;font-size:18px;padding-top:20px}#fb-root #fb_dialog_ipad_overlay{background:rgba(0, 0, 0, .4);bottom:0;left:0;min-height:100%;position:absolute;right:0;top:0;width:100%;z-index:10000}#fb-root #fb_dialog_ipad_overlay.hidden{display:none}.fb_dialog.fb_dialog_mobile.loading iframe{visibility:hidden}.fb_dialog_mobile .fb_dialog_iframe{position:sticky;top:0}.fb_dialog_content .dialog_header{background:linear-gradient(from(#738aba), to(#2c4987));border-bottom:1px solid;border-color:#1d3c78;box-shadow:white 0 1px 1px -1px inset;color:#fff;font:bold 14px Helvetica, sans-serif;text-overflow:ellipsis;text-shadow:rgba(0, 30, 84, .296875) 0 -1px 0;vertical-align:middle;white-space:nowrap}.fb_dialog_content .dialog_header table{height:43px;width:100%}.fb_dialog_content .dialog_header td.header_left{font-size:12px;padding-left:5px;vertical-align:middle;width:60px}.fb_dialog_content .dialog_header td.header_right{font-size:12px;padding-right:5px;vertical-align:middle;width:60px}.fb_dialog_content .touchable_button{background:linear-gradient(from(#4267B2), to(#2a4887));background-clip:padding-box;border:1px solid #29487d;border-radius:3px;display:inline-block;line-height:18px;margin-top:3px;max-width:85px;padding:4px 12px;position:relative}.fb_dialog_content .dialog_header .touchable_button input{background:none;border:none;color:#fff;font:bold 12px Helvetica, sans-serif;margin:2px -12px;padding:2px 6px 3px 6px;text-shadow:rgba(0, 30, 84, .296875) 0 -1px 0}.fb_dialog_content .dialog_header .header_center{color:#fff;font-size:16px;font-weight:bold;line-height:18px;text-align:center;vertical-align:middle}.fb_dialog_content .dialog_content{background:url(https://static.xx.fbcdn.net/rsrc.php/v3/y9/r/jKEcVPZFk-2.gif) no-repeat 50% 50%;border:1px solid #4a4a4a;border-bottom:0;border-top:0;height:150px}.fb_dialog_content .dialog_footer{background:#f5f6f7;border:1px solid #4a4a4a;border-top-color:#ccc;height:40px}#fb_dialog_loader_close{float:left}.fb_dialog.fb_dialog_mobile .fb_dialog_close_button{text-shadow:rgba(0, 30, 84, .296875) 0 -1px 0}.fb_dialog.fb_dialog_mobile .fb_dialog_close_icon{visibility:hidden}#fb_dialog_loader_spinner{animation:rotateSpinner 1.2s linear infinite;background-color:transparent;background-image:url(https://static.xx.fbcdn.net/rsrc.php/v3/yD/r/t-wz8gw1xG1.png);background-position:50% 50%;background-repeat:no-repeat;height:24px;width:24px}@keyframes rotateSpinner{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}
.fb_iframe_widget{display:inline-block;position:relative}.fb_iframe_widget span{display:inline-block;position:relative;text-align:justify}.fb_iframe_widget iframe{position:absolute}.fb_iframe_widget_fluid_desktop,.fb_iframe_widget_fluid_desktop span,.fb_iframe_widget_fluid_desktop iframe{max-width:100%}.fb_iframe_widget_fluid_desktop iframe{min-width:220px;position:relative}.fb_iframe_widget_lift{z-index:1}.fb_iframe_widget_fluid{display:inline}.fb_iframe_widget_fluid span{width:100%}</style><script type="text/javascript" charset="utf-8" src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/t_prism_sitemessages.php"></script></head>
<body class="chat-enabled chat-freshchat">
<!-- Facebook Pixel Code -->
<noscript><img height="1" width="1" style="display:none" src="https://www.facebook.com/tr?id=389137334769464&ev=PageView&noscript=1"/></noscript>
<!-- End Facebook Pixel Code -->
<script>
    document.getElementsByTagName('body')[0].classList.remove('no-js');
    if ( window.isDifferentZone ) {
        document.querySelector('body').classList.add('time-conversion-applied');
    }
    if ( window.hasWrongTime ) {
        document.querySelector('body').classList.add('wrong-hour');
    }
</script>

    <nav class="navbar-main hidden-sm-down dark navbar">
    <div class="nav-container">
        <div class="navbar-header clearfix">
            <button class="navbar-toggler hidden-md-up pull-right" type="button" data-toggle="collapse" data-target="#collapsingNavbarUpper"><i class="fa fa-bars"></i></button>
        </div>
        <div class="collapse navbar-toggleable-sm container" id="collapsingNavbarUpper">
            <ul class="nav navbar-nav navbar-nav-left">
                                    <li class="nav-item nav-contact">
    <span>Skontaktuj się z nami:</span>
    <a href="mailto:support@kodilla.com">
        <i class="fa fa-envelope-o"></i>
        support@kodilla.com
    </a>
    <span>lub</span>
    <a href="javascript:fcWidget.open();">
        <i class="fa fa-comments"></i>
        porozmawiaj na czacie
    </a>
</li>
                                </ul>
            <ul class="nav navbar-nav pull-right">
                <li class="nav-item">
    <a class="nav-link dropdown-toggle" href="https://kodilla.com/pl/bootcamp-module/146/97/3774#" id="navbarDropdownMenuLink" aria-haspopup="true" aria-expanded="false">
        <img class="img-no-border ico-current-lang" src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/ico.globe.svg">Polski
    </a>
    <div class="dropdown-menu-css">
        <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                            <a class="dropdown-item" href="https://kodilla.com/pl"><img src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/pl.svg">Polski</a>
                            <a class="dropdown-item" href="https://kodilla.com/en"><img src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/en.svg">English</a>
                    </div>
    </div>
</li>
                                <li class="nav-item">
                    <a href="https://kodilla.com/pl/informator" class="nav-link" target="_blank">
        Informator
    </a>
                </li>
                <li class="nav-item hidden-sm-down">
    <a href="https://kodilla.com/pl/account" class="nav-link">Konto</a>
</li>
        <li class="nav-item">
    <a class="analytics-track nav-link nav-link-accent" data-event="account_logout" href="https://kodilla.com/pl/sign-out">Wyloguj</a>
</li>
            </ul>
        </div>
    </div>
</nav>
<nav class="navbar-main light navbar">
    <div class="container clearfix">
        <a class="navbar-brand" href="https://kodilla.com/pl">
            <svg id="kodilla-logo" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 168 29.553" width="168px" height="30px">
                <defs>
                    <style>
                        .navbar-logo-fill {
                            fill: #0dac4b;
                        }
                    </style>
                </defs>
                <g id="Group_1" data-name="Group 1" transform="translate(23.59)">
                    <path id="KODILLA_copy_5_1_" class="navbar-logo-fill" d="M78.058,0a14.758,14.758,0,1,0,.075,0Zm0,23.739a8.939,8.939,0,0,1-8.944-8.907V14.8c0-4.957,4.584-.708,8.907-.708,4.919,0,9.019-4.211,9.019.708a8.978,8.978,0,0,1-8.981,8.944Z" transform="translate(-63.3)"></path>
                    <ellipse id="eye_copy_4_1_" class="navbar-logo-fill" cx="3.876" cy="3.876" rx="3.876" ry="3.876" transform="translate(9.462 13.2) rotate(-28.436)"></ellipse>
                </g>
                <path id="Path_1" data-name="Path 1" class="navbar-logo-fill" d="M0,29.819V.9H6.671V13.347L17.255.9h7.491L13.938,13.794,25.491,29.819h-7.6l-8.2-11.665-3.019,3.13v8.5H0Z" transform="translate(0 -0.565)"></path>
                <path id="Path_2" data-name="Path 2" class="navbar-logo-fill" d="M151.4,29.819V.9h10.807a15.515,15.515,0,0,1,6.261,1.155,12.966,12.966,0,0,1,4.509,3.093A12.918,12.918,0,0,1,175.7,9.732a17.245,17.245,0,0,1,.932,5.59,16.821,16.821,0,0,1-1.006,5.963,12.227,12.227,0,0,1-2.907,4.547,13.484,13.484,0,0,1-4.547,2.944,15.964,15.964,0,0,1-5.925,1.043Zm18.41-14.5a11.274,11.274,0,0,0-.522-3.466,7.723,7.723,0,0,0-1.491-2.72,6.616,6.616,0,0,0-2.385-1.752,8.055,8.055,0,0,0-3.205-.6h-4.1v17.18h4.1a7.985,7.985,0,0,0,3.242-.634,6.8,6.8,0,0,0,2.385-1.826,8.286,8.286,0,0,0,1.453-2.72A11.634,11.634,0,0,0,169.81,15.322Z" transform="translate(-94.978 -0.565)"></path>
                <path id="Path_3" data-name="Path 3" class="navbar-logo-fill" d="M228.3,29.819V.9h6.671V29.819Z" transform="translate(-143.219 -0.565)"></path>
                <path id="Path_4" data-name="Path 4" class="navbar-logo-fill" d="M259.9,29.819V.9h6.671V23.968h14.012v5.851Z" transform="translate(-163.043 -0.565)"></path>
                <path id="Path_5" data-name="Path 5" class="navbar-logo-fill" d="M327.371,23.931V.9H320.7V29.819h18.522l2.124-5.851H327.371Z" transform="translate(-201.185 -0.565)"></path>
                <path id="Path_6" data-name="Path 6" class="navbar-logo-fill" d="M388.547.9h6.037L405.13,29.819h-6.857l-2.236-6.484h-9.019l-2.2,6.484H378Zm6.373,17.851L391.528,8.54l-3.466,10.211Z" transform="translate(-237.13 -0.565)"></path>
            </svg>
        </a>
        <button class="navbar-toggler pull-right collapsed" type="button" data-toggle="collapse" data-target="#navbar-main">
            <i class="fa fa-bars navbar-ico-open"></i>
            <i class="fa fa-times navbar-ico-close"></i>
        </button>
        <ul id="navbar-main" class="nav navbar-nav pull-right collapse">
            <li class="nav-item hidden-sm-down">
    <a class="dropdown-toggle nav-link">
        Szkolenia Bootcamp
    </a>
    <ul class="bootcamp-list">
                    <li class="list-sub list-sub-fe">
            <svg class="menu-svg" xmlns="http://www.w3.org/2000/svg" width="35" height="32" viewBox="0 0 35 32">
                <g fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke-width=".75">
                    <polyline stroke="#02AC46" points="3.382 24.574 3.382 30.736 33.743 30.736 33.743 .375 3.382 .375 3.382 18.562"></polyline>
                    <path stroke="#02AC46" d="M25.611 15.95L24.921 15.655C23.688 15.113 23.098 14.817 23.098 13.88 23.098 13.191 23.639 12.648 24.527 12.648 25.365 12.648 25.858 12.993 26.399 13.88L28.668 12.401C27.73 10.726 26.399 10.085 24.576 10.085 21.964 10.085 20.288 11.76 20.288 13.879 20.288 16.245 21.718 17.379 23.788 18.315L24.477 18.611C25.759 19.153 26.597 19.548 26.597 20.583 26.597 21.421 25.858 22.062 24.625 22.062 23.146 22.062 22.357 21.322 21.767 20.238L19.4 21.569C20.238 23.244 22.012 24.526 24.723 24.526 27.483 24.526 29.552 23.047 29.552 20.484 29.504 18.119 28.124 17.034 25.611 15.95zM17.823 20.238L17.823 10.282 14.866 10.282 14.866 20.189C14.866 21.668 14.274 22.012 13.289 22.012 12.303 22.012 11.859 21.322 11.416 20.533L9.001 22.012C9.691 23.491 11.07 24.674 13.388 24.674 16 24.575 17.823 23.244 17.823 20.238z"></path>
                    <circle cx="3.382" cy="21.568" r="3.006" stroke="#02AC46"></circle>
                </g>
            </svg>
            <a href="https://kodilla.com/pl/bootcamp/front-end">
                <h4 class="bootcamp-name">Front-end: React</h4>
                <p>Naucz się tworzyć front-end aplikacji w 4 miesiące</p>
                <span class="bootcamp-label">nowość</span>
            </a>
        </li>
                <li class="list-sub">
            <svg class="menu-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 27.61 27.4"><defs><style>.stroke-grey,.cls-2{fill:none;stroke-linecap:round;stroke-linejoin:round;stroke-width:0.75px;}.stroke-grey{stroke:#e0e0e0;}.cls-2{stroke:#02ac46;}</style></defs><title>Front i Web Developer</title><line class="stroke-grey" x1="22.2" y1="3.46" x2="24.01" y2="5.31"></line><line class="stroke-grey" x1="22.2" y1="5.31" x2="24.01" y2="3.46"></line><polyline class="stroke-grey" points="0.96 26.61 0.96 0.79 26.72 0.79 26.72 26.61 0.96 26.61"></polyline><line class="stroke-grey" x1="1.22" y1="7.98" x2="26.72" y2="7.98"></line><rect class="stroke-grey" x="17.72" y="3.49" width="1.8" height="1.8"></rect><line class="stroke-grey" x1="15.03" y1="5.28" x2="13.24" y2="5.28"></line><polyline class="cls-2" points="16.86 20.13 19.8 16.75 16.86 13.37"></polyline><polyline class="cls-2" points="10.51 20.13 7.57 16.75 10.51 13.37"></polyline><line class="cls-2" x1="15.78" y1="10.43" x2="11.67" y2="22.81"></line></svg>
            <a href="https://kodilla.com/pl/bootcamp/webdeveloper?type=wdp">
                <h4 class="bootcamp-name">Web Developer</h4>
                <p>Naucz&nbsp;się tworzyć aplikacje internetowe od&nbsp;podstaw</p>
                <span class="bootcamp-label">FRONT-END i BACK-END</span>
            </a>
        </li>
        <li class="list-sub">
            <svg class="menu-svg" width="32px" height="32px" viewBox="0 0 26 26" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                <title>menu_java_logo</title>
                <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                    <g id="menu_java_logo">
                        <g id="svg_1" transform="translate(5.000000, 3.000000)" fill-rule="nonzero">
                            <path d="M10.1499999,0.051000042 C10.6109999,0.576000042 10.7619999,1.32700004 10.6309999,2.00400004 C10.4869999,2.76400004 10.0669999,3.43700004 9.56999987,4.01500004 C9.17299987,4.48200004 8.71599987,4.89400004 8.24099987,5.27700004 C7.68499987,5.72300004 7.14099987,6.20500004 6.79299987,6.83200004 C6.49799987,7.34200004 6.42999987,7.97100004 6.63099987,8.52500004 C6.95899987,9.47700004 7.72699987,10.184 8.14199987,11.082 C7.68099987,10.674 7.22999987,10.252 6.80899987,9.80600004 C6.36699987,9.33500004 5.94999987,8.83400004 5.67499987,8.24600004 C5.48699987,7.83400004 5.40399987,7.35200004 5.54699987,6.91700004 C5.68999987,6.47000004 6.00799987,6.11200004 6.32599987,5.77800004 C7.21499987,4.89000004 8.30899987,4.23700004 9.17699987,3.33400004 C9.65799987,2.83900004 10.0569999,2.24500004 10.1939999,1.56300004 C10.3059999,1.06200004 10.2529999,0.547000042 10.1499999,0.051000042" id="path156_2_" fill="#02AC46"></path>
                            <path d="M10.1499999,0.051000042 C10.6109999,0.576000042 10.7619999,1.32700004 10.6309999,2.00400004 C10.4869999,2.76400004 10.0669999,3.43700004 9.56999987,4.01500004 C9.17299987,4.48200004 8.71599987,4.89400004 8.24099987,5.27700004 C7.68499987,5.72300004 7.14099987,6.20500004 6.79299987,6.83200004 C6.49799987,7.34200004 6.42999987,7.97100004 6.63099987,8.52500004 C6.95899987,9.47700004 7.72699987,10.184 8.14199987,11.082 C7.68099987,10.674 7.22999987,10.252 6.80899987,9.80600004 C6.36699987,9.33500004 5.94999987,8.83400004 5.67499987,8.24600004 C5.48699987,7.83400004 5.40399987,7.35200004 5.54699987,6.91700004 C5.68999987,6.47000004 6.00799987,6.11200004 6.32599987,5.77800004 C7.21499987,4.89000004 8.30899987,4.23700004 9.17699987,3.33400004 C9.65799987,2.83900004 10.0569999,2.24500004 10.1939999,1.56300004 C10.3059999,1.06200004 10.2529999,0.547000042 10.1499999,0.051000042 Z" id="path158_2_" fill="#02AC46"></path>
                            <path d="M9.42299987,5.63900004 C10.3739999,4.93700004 11.4889999,4.49100004 12.6179999,4.16700004 C11.7239999,4.73600004 10.7929999,5.25600004 10.0209999,5.98800004 C9.74199987,6.25800004 9.47599987,6.56700004 9.35399987,6.94500004 C9.26099987,7.22400004 9.29899987,7.53400004 9.41299987,7.79900004 C9.61999987,8.27000004 9.96799987,8.65200004 10.2329999,9.08400004 C10.4589999,9.45200004 10.4979999,9.92300004 10.3249999,10.321 C10.0659999,10.904 9.55599987,11.331 9.02499987,11.67 C8.95699987,11.71 8.89799987,11.783 8.81499987,11.793 C9.16799987,11.473 9.44399987,11.022 9.43199987,10.537 C9.42199987,10.174 9.22099987,9.85500004 8.98699987,9.59500004 C8.50099987,9.01600004 8.09199987,8.28100004 8.17599987,7.50000004 C8.25999987,6.71800004 8.82099987,6.09000004 9.42299987,5.63900004" id="path160_2_" fill="#02AC46"></path>
                            <path d="M9.42299987,5.63900004 C10.3739999,4.93700004 11.4889999,4.49100004 12.6179999,4.16700004 C11.7239999,4.73600004 10.7929999,5.25600004 10.0209999,5.98800004 C9.74199987,6.25800004 9.47599987,6.56700004 9.35399987,6.94500004 C9.26099987,7.22400004 9.29899987,7.53400004 9.41299987,7.79900004 C9.61999987,8.27000004 9.96799987,8.65200004 10.2329999,9.08400004 C10.4589999,9.45200004 10.4979999,9.92300004 10.3249999,10.321 C10.0659999,10.904 9.55599987,11.331 9.02499987,11.67 C8.95699987,11.71 8.89799987,11.783 8.81499987,11.793 C9.16799987,11.473 9.44399987,11.022 9.43199987,10.537 C9.42199987,10.174 9.22099987,9.85500004 8.98699987,9.59500004 C8.50099987,9.01600004 8.09199987,8.28100004 8.17599987,7.50000004 C8.25999987,6.71800004 8.82099987,6.09000004 9.42299987,5.63900004 Z" id="path162_2_" fill="#02AC46"></path>
                            <path class="fill-grey" d="M12.7999999,11.311 C13.0049999,11.061 13.3329999,10.997 13.6329999,10.957 C14.1539999,10.889 14.7069999,11.021 15.0999999,11.379 C15.4249999,11.669 15.6059999,12.12 15.5379999,12.557 C15.4639999,13.063 15.1249999,13.485 14.7429999,13.804 C14.0519999,14.358 13.1969999,14.682 12.3439999,14.898 C12.3939999,14.844 12.4469999,14.795 12.5109999,14.755 C13.1579999,14.406 13.8009999,13.999 14.2779999,13.43 C14.5669999,13.077 14.7939999,12.616 14.6979999,12.15 C14.6009999,11.61 14.0769999,11.217 13.5419999,11.188 C13.2849999,11.164 13.0449999,11.262 12.7999999,11.311" id="path164_2_" fill="#E0E0E0"></path>
                            <path class="fill-grey" d="M12.7999999,11.311 C13.0049999,11.061 13.3329999,10.997 13.6329999,10.957 C14.1539999,10.889 14.7069999,11.021 15.0999999,11.379 C15.4249999,11.669 15.6059999,12.12 15.5379999,12.557 C15.4639999,13.063 15.1249999,13.485 14.7429999,13.804 C14.0519999,14.358 13.1969999,14.682 12.3439999,14.898 C12.3939999,14.844 12.4469999,14.795 12.5109999,14.755 C13.1579999,14.406 13.8009999,13.999 14.2779999,13.43 C14.5669999,13.077 14.7939999,12.616 14.6979999,12.15 C14.6009999,11.61 14.0769999,11.217 13.5419999,11.188 C13.2849999,11.164 13.0449999,11.262 12.7999999,11.311 Z" id="path166_2_" fill="#E0E0E0"></path>
                            <path class="fill-grey" d="M2.93699987,11.757 C3.83899987,11.37 4.82099987,11.119 5.80599987,11.134 C5.23299987,11.301 4.64399987,11.443 4.10399987,11.698 C3.97699987,11.766 3.82999987,11.83 3.75599987,11.963 C3.71599987,12.066 3.82499987,12.134 3.90299987,12.169 C4.23599987,12.307 4.60299987,12.326 4.96299987,12.36 C6.21899987,12.443 7.48099987,12.395 8.73199987,12.316 C9.96699987,12.237 11.1949999,12.07 12.4159999,11.874 C12.1459999,12.001 11.8719999,12.129 11.6209999,12.291 C11.4939999,12.379 11.3369999,12.404 11.1949999,12.438 C9.69299987,12.772 8.15199987,12.876 6.62299987,12.899 C6.02699987,12.904 5.43899987,12.894 4.84999987,12.855 C4.19399987,12.811 3.53099987,12.762 2.88899987,12.59 C2.70099987,12.536 2.50499987,12.477 2.35999987,12.344 C2.28499987,12.285 2.28499987,12.167 2.34899987,12.098 C2.50899987,11.934 2.73599987,11.856 2.93699987,11.757" id="path168_2_" fill="#E0E0E0"></path>
                            <path class="fill-grey" d="M2.93699987,11.757 C3.83899987,11.37 4.82099987,11.119 5.80599987,11.134 C5.23299987,11.301 4.64399987,11.443 4.10399987,11.698 C3.97699987,11.766 3.82999987,11.83 3.75599987,11.963 C3.71599987,12.066 3.82499987,12.134 3.90299987,12.169 C4.23599987,12.307 4.60299987,12.326 4.96299987,12.36 C6.21899987,12.443 7.48099987,12.395 8.73199987,12.316 C9.96699987,12.237 11.1949999,12.07 12.4159999,11.874 C12.1459999,12.001 11.8719999,12.129 11.6209999,12.291 C11.4939999,12.379 11.3369999,12.404 11.1949999,12.438 C9.69299987,12.772 8.15199987,12.876 6.62299987,12.899 C6.02699987,12.904 5.43899987,12.894 4.84999987,12.855 C4.19399987,12.811 3.53099987,12.762 2.88899987,12.59 C2.70099987,12.536 2.50499987,12.477 2.35999987,12.344 C2.28499987,12.285 2.28499987,12.167 2.34899987,12.098 C2.50899987,11.934 2.73599987,11.856 2.93699987,11.757 Z" id="path170_2_" fill="#E0E0E0"></path>
                            <path class="fill-grey" d="M4.09499987,13.853 C4.34999987,13.652 4.65499987,13.539 4.95699987,13.431 C4.85999987,13.549 4.72299987,13.662 4.71299987,13.824 C4.70799987,13.927 4.79099987,14.006 4.87499987,14.054 C5.03699987,14.138 5.21899987,14.167 5.39999987,14.191 C6.33999987,14.289 7.29399987,14.344 8.24499987,14.279 C9.11299987,14.235 9.97699987,14.092 10.8359999,13.941 C11.0709999,14.162 11.3509999,14.314 11.6459999,14.446 C10.6109999,14.75 9.54699987,14.927 8.47699987,15.01 C7.46599987,15.078 6.43999987,15.074 5.43499987,14.912 C5.03799987,14.838 4.62899987,14.754 4.26699987,14.568 C4.11999987,14.489 3.95299987,14.386 3.90899987,14.214 C3.87899987,14.069 3.98699987,13.936 4.09499987,13.853" id="path172_2_" fill="#E0E0E0"></path>
                            <path class="fill-grey" d="M4.09499987,13.853 C4.34999987,13.652 4.65499987,13.539 4.95699987,13.431 C4.85999987,13.549 4.72299987,13.662 4.71299987,13.824 C4.70799987,13.927 4.79099987,14.006 4.87499987,14.054 C5.03699987,14.138 5.21899987,14.167 5.39999987,14.191 C6.33999987,14.289 7.29399987,14.344 8.24499987,14.279 C9.11299987,14.235 9.97699987,14.092 10.8359999,13.941 C11.0709999,14.162 11.3509999,14.314 11.6459999,14.446 C10.6109999,14.75 9.54699987,14.927 8.47699987,15.01 C7.46599987,15.078 6.43999987,15.074 5.43499987,14.912 C5.03799987,14.838 4.62899987,14.754 4.26699987,14.568 C4.11999987,14.489 3.95299987,14.386 3.90899987,14.214 C3.87899987,14.069 3.98699987,13.936 4.09499987,13.853 Z" id="path174_2_" fill="#E0E0E0"></path>
                            <path class="fill-grey" d="M4.66499987,15.992 C4.89199987,15.81 5.17099987,15.717 5.44499987,15.638 C5.35699987,15.722 5.19999987,15.825 5.26799987,15.967 C5.40199987,16.139 5.64599987,16.159 5.84199987,16.203 C6.67099987,16.307 7.50999987,16.375 8.33899987,16.311 C8.96699987,16.272 9.58499987,16.159 10.1979999,16.051 C10.5509999,16.258 10.9209999,16.434 11.2979999,16.59 C10.7189999,16.85 10.0949999,17.018 9.47199987,17.135 C8.42299987,17.322 7.33899987,17.346 6.28299987,17.179 C5.81699987,17.096 5.34299987,16.988 4.91999987,16.757 C4.75799987,16.664 4.58699987,16.556 4.51799987,16.374 C4.46299987,16.232 4.55199987,16.08 4.66499987,15.992" id="path176_2_" fill="#E0E0E0"></path>
                            <path class="fill-grey" d="M4.66499987,15.992 C4.89199987,15.81 5.17099987,15.717 5.44499987,15.638 C5.35699987,15.722 5.19999987,15.825 5.26799987,15.967 C5.40199987,16.139 5.64599987,16.159 5.84199987,16.203 C6.67099987,16.307 7.50999987,16.375 8.33899987,16.311 C8.96699987,16.272 9.58499987,16.159 10.1979999,16.051 C10.5509999,16.258 10.9209999,16.434 11.2979999,16.59 C10.7189999,16.85 10.0949999,17.018 9.47199987,17.135 C8.42299987,17.322 7.33899987,17.346 6.28299987,17.179 C5.81699987,17.096 5.34299987,16.988 4.91999987,16.757 C4.75799987,16.664 4.58699987,16.556 4.51799987,16.374 C4.46299987,16.232 4.55199987,16.08 4.66499987,15.992 Z" id="path178_2_" fill="#E0E0E0"></path>
                            <path class="fill-grey" d="M1.94099987,17.38 C2.39299987,17.228 2.85899987,17.105 3.33499987,17.09 C3.52599987,17.085 3.72299987,17.095 3.88899987,17.194 C3.32099987,17.228 2.75099987,17.37 2.24199987,17.631 C2.12899987,17.694 2.00199987,17.768 1.95699987,17.901 C1.95699987,18.053 2.12899987,18.103 2.24199987,18.151 C2.95399987,18.416 3.71299987,18.499 4.45999987,18.578 C6.68199987,18.764 8.91999987,18.716 11.1429999,18.514 C11.9819999,18.421 12.8259999,18.328 13.6409999,18.097 C13.8999999,18.009 14.1949999,17.921 14.3659999,17.69 C14.4699999,17.553 14.4009999,17.381 14.2989999,17.263 C14.4649999,17.357 14.6989999,17.474 14.6659999,17.7 C14.6029999,17.935 14.3609999,18.058 14.1659999,18.171 C13.5379999,18.49 12.8459999,18.652 12.1589999,18.795 C10.1619999,19.187 8.11599987,19.276 6.08499987,19.217 C4.55399987,19.162 3.02199987,19.016 1.51199987,18.755 C1.24299987,18.692 0.938999866,18.638 0.740999866,18.426 C0.613999866,18.279 0.725999866,18.073 0.848999866,17.965 C1.15699987,17.68 1.55299987,17.523 1.94099987,17.38" id="path180_2_" fill="#E0E0E0"></path>
                            <path class="fill-grey" d="M1.94099987,17.38 C2.39299987,17.228 2.85899987,17.105 3.33499987,17.09 C3.52599987,17.085 3.72299987,17.095 3.88899987,17.194 C3.32099987,17.228 2.75099987,17.37 2.24199987,17.631 C2.12899987,17.694 2.00199987,17.768 1.95699987,17.901 C1.95699987,18.053 2.12899987,18.103 2.24199987,18.151 C2.95399987,18.416 3.71299987,18.499 4.45999987,18.578 C6.68199987,18.764 8.91999987,18.716 11.1429999,18.514 C11.9819999,18.421 12.8259999,18.328 13.6409999,18.097 C13.8999999,18.009 14.1949999,17.921 14.3659999,17.69 C14.4699999,17.553 14.4009999,17.381 14.2989999,17.263 C14.4649999,17.357 14.6989999,17.474 14.6659999,17.7 C14.6029999,17.935 14.3609999,18.058 14.1659999,18.171 C13.5379999,18.49 12.8459999,18.652 12.1589999,18.795 C10.1619999,19.187 8.11599987,19.276 6.08499987,19.217 C4.55399987,19.162 3.02199987,19.016 1.51199987,18.755 C1.24299987,18.692 0.938999866,18.638 0.740999866,18.426 C0.613999866,18.279 0.725999866,18.073 0.848999866,17.965 C1.15699987,17.68 1.55299987,17.523 1.94099987,17.38 Z" id="path182_2_" fill="#E0E0E0"></path>
                            <path class="fill-grey" d="M14.1699999,19.058 C14.6639999,18.886 15.1939999,18.704 15.5629999,18.312 C15.4999999,18.739 15.1309999,19.033 14.7689999,19.225 C14.0729999,19.588 13.2909999,19.755 12.5159999,19.892 C10.8779999,20.152 9.21399987,20.216 7.54999987,20.187 C6.41699987,20.152 5.27399987,20.108 4.16099987,19.873 C3.89399987,19.799 3.60999987,19.75 3.37999987,19.593 C4.37099987,19.76 5.37699987,19.829 6.38299987,19.868 C8.03599987,19.917 9.69499987,19.853 11.3379999,19.647 C12.2899999,19.514 13.2469999,19.353 14.1699999,19.058" id="path184_2_" fill="#E0E0E0"></path>
                            <path class="fill-grey" d="M14.1699999,19.058 C14.6639999,18.886 15.1939999,18.704 15.5629999,18.312 C15.4999999,18.739 15.1309999,19.033 14.7689999,19.225 C14.0729999,19.588 13.2909999,19.755 12.5159999,19.892 C10.8779999,20.152 9.21399987,20.216 7.54999987,20.187 C6.41699987,20.152 5.27399987,20.108 4.16099987,19.873 C3.89399987,19.799 3.60999987,19.75 3.37999987,19.593 C4.37099987,19.76 5.37699987,19.829 6.38299987,19.868 C8.03599987,19.917 9.69499987,19.853 11.3379999,19.647 C12.2899999,19.514 13.2469999,19.353 14.1699999,19.058 Z" id="path186_2_" fill="#E0E0E0"></path>
                        </g>
                        <path class="stroke-grey" d="M25.725,21.8309333 L25.725,4.16906671 C25.725,2.01884874 23.9812191,0.275 21.8310955,0.275 L4.16890446,0.275 C2.01878088,0.275 0.275,2.01884874 0.275,4.16906671 L0.275,21.8309333 C0.275,23.9818034 2.01842105,25.725 4.16890446,25.725 L21.8310955,25.725 C23.9815789,25.725 25.725,23.9818034 25.725,21.8309333 Z" id="svg_2" stroke="#E0E0E0" stroke-width="0.55"></path>
                    </g>
                </g>
            </svg>
            <a href="https://kodilla.com/pl/bootcamp/java?type=jdp">
                <h4 class="bootcamp-name">Java Developer</h4>
                <p>Poznaj najpopularniejszy na&nbsp;świecie język programowania od&nbsp;zera</p>
            </a>
        </li>
    </ul>
</li>

                        <li class="nav-item hidden-sm-down">
    <a class="dropdown-toggle nav-link">
        Strefa kursanta
    </a>
    <ul>
                    <li><a href="https://kodilla.com/pl/bootcamp-dashboard/146" class="nav-link">Bootcamp Java Plus 2018-10</a></li>
                    <li><a class="nav-link" href="https://kodilla.com/pl/kursy">Samodzielne kursy</a></li>
                    <li><a class="nav-link" href="https://chat.kodilla.com/" target="_blank">Komunikator</a></li>
                    <li><a class="nav-link" href="https://kodilla.com/pl/projects">Moje projekty</a></li>
    </ul>
</li>
                            <li class="nav-item hidden-sm-down">
    <a class="dropdown-toggle nav-link">
        O nas
    </a>
    <ul class="about-us">
        <li><a href="https://kodilla.com/pl/mentors" class="nav-link">Mentorzy</a></li>
        <li><a href="https://kodilla.com/pl/zespol" class="nav-link">Zespół Kodilli</a></li>
        <li><a href="https://kodilla.com/pl/about" class="nav-link">O firmie</a></li>
    </ul>
</li>
                                                                    <li class="nav-item hidden-md-up nav-group">
    <span class="mobile-menu-separator">Szkolenia Bootcamp</span>
    <ul>
                    <li class="nav-item list-sub-fe">
                <a class="nav-link nav-link-with-label" href="https://kodilla.com/pl/bootcamp/front-end">Bootcamp Front-end: React
                    <span class="bootcamp-label">nowość</span>
                </a>
            </li>
                <li class="nav-item">
            <a class="nav-link nav-link-with-label" href="https://kodilla.com/pl/bootcamp/webdeveloper">Bootcamp Web Developer
                <span class="bootcamp-label">FRONT-END i BACK-END</span>
            </a>
        </li>
        <li class="nav-item">
            <a class="nav-link" href="https://kodilla.com/pl/bootcamp/java">Bootcamp Java</a>
        </li>
    </ul>
</li>
            <li class="nav-item hidden-md-up nav-group">
            <span class="mobile-menu-separator">Strefa kursanta</span>
            <ul>
                <li class="nav-item ">
                                            <a class="nav-link" href="https://kodilla.com/pl/bootcamp-dashboard/146">
                            Bootcamp   Java Plus 2018-10
                        </a>
                                    </li>
                <li class="nav-item ">
                    <a class="nav-link" href="https://kodilla.com/pl/kursy">Samodzielne kursy</a>
                </li>
                                    <li class="nav-item ">
                        <a class="nav-link" href="https://chat.kodilla.com/" target="_blank">Komunikator</a>
                    </li>
                                <li class="nav-item">
                    <a class="nav-link" href="https://kodilla.com/pl/projects">Moje projekty</a>
                </li>
            </ul>
        </li>
    
        
            <li class="nav-item hidden-md-up nav-group">
            <span class="mobile-menu-separator">O nas</span>
            <ul>
                <li class="nav-item">
                    <a href="https://kodilla.com/pl/mentors" class="nav-link">Mentorzy</a>
                </li>
                <li class="nav-item">
                    <a href="https://kodilla.com/pl/zespol" class="nav-link">Zespół Kodilli</a>
                </li>
                <li class="nav-item">
                    <a href="https://kodilla.com/pl/about" class="nav-link">O firmie</a>
                </li>
            </ul>
        </li>
    
<li class="nav-item hidden-md-up nav-group">
    <span class="mobile-menu-separator">Pozostałe</span>
    <ul>
                                        
        <li class="nav-item">
            <a href="https://kodilla.com/pl/informator" class="nav-link" target="_blank">
        Informator
    </a>
        </li>
    </ul>

</li>

    <li class="nav-item hidden-md-up">
        <a class="nav-link" href="https://kodilla.com/pl/account">Konto</a>
    </li>
    <li class="nav-item hidden-md-up">
        <a class="nav-link analytics-track" data-event="account_logout" href="https://kodilla.com/pl/sign-out">Wyloguj</a>
    </li>

        
    <li class="nav-item hidden-md-up nav-group">
        <span class="mobile-menu-separator">Skontaktuj się z nami</span>
        <ul>
            <li class="nav-item">
                <a href="mailto:support@kodilla.com" class="nav-link">
                    <i class="fa fa-envelope-o"></i>
                    support@kodilla.com
                </a>
            </li>
            <li class="nav-item">
                <a href="javascript:fcWidget.open();" class="nav-link">
                    <i class="fa fa-comments"></i>
                    <span>Porozmawiaj na czacie</span>
                </a>
            </li>
        </ul>
    </li>

<li class="nav-item hidden-md-up">
        <a class="nav-link" href="https://kodilla.com/pl"><img src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/pl.svg">Polski</a>
    </li>
    <li class="nav-item hidden-md-up">
        <a class="nav-link" href="https://kodilla.com/en"><img src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/en.svg">English</a>
    </li>

        </ul>
    </div>
</nav>
<main class="bootcamp module page-height-fix" id="bootcamp-module">
    <div class="table-of-contents aside-sticky">
        <section class="container">
            <div class="row">
                <aside class="module-nav col-md-4 col-md-offset-8">
                    <section class="card">
                        <div class="card-header">
                            <h4 class="card-title">Spis treści modułu</h4>
                        </div>
                        <ul class="list-group list-group-flush ps-container ps-theme-default ps-active-y" data-ps-id="366d3b8c-6090-4d7e-45ec-4b7902f924ad">
                                                        <li class="list-group-item current">
                                <a href="https://kodilla.com/pl/bootcamp-module/146/97/3774#submodule-455" class="clearfix">
                                    <p>30.1. Procedury i funkcje wbudowane</p>
                                    <i class="fa fa-check-circle-o"></i>
                                    <i class="fa fa-play-circle-o"></i>
                                    <i class="fa fa-send-o"></i>
                                    <i class="fa fa-exclamation-circle"></i>
                                </a>
                            </li><li class="list-group-item list-group-flush sub "><a href="https://kodilla.com/pl/bootcamp-module/146/97/3774#301-procedury-i-funkcje-wbudowane-przygotowanie-srodowiska-i-danych-testowych" class="clearfix">Przygotowanie środowiska i danych testowych</a></li><li class="list-group-item list-group-flush sub "><a href="https://kodilla.com/pl/bootcamp-module/146/97/3774#301-procedury-i-funkcje-wbudowane-definiowanie-pierwszych-procedur" class="clearfix">Definiowanie pierwszych procedur</a></li><li class="list-group-item list-group-flush sub "><a href="https://kodilla.com/pl/bootcamp-module/146/97/3774#301-procedury-i-funkcje-wbudowane-modyfikowanie-wczesniej-utworzonych-procedur" class="clearfix">Modyfikowanie wcześniej utworzonych procedur</a></li><li class="list-group-item list-group-flush sub "><a href="https://kodilla.com/pl/bootcamp-module/146/97/3774#301-procedury-i-funkcje-wbudowane-procedury-kontra-funkcje" class="clearfix">Procedury kontra funkcje</a></li><li class="list-group-item list-group-flush sub "><a href="https://kodilla.com/pl/bootcamp-module/146/97/3774#301-procedury-i-funkcje-wbudowane-zmienne-i-przekazywanie-argumentow-do-procedur-i-funkcji" class="clearfix">Zmienne i przekazywanie argumentów do procedur i funkcji</a></li><li class="list-group-item list-group-flush sub task"><a href="https://kodilla.com/pl/bootcamp-module/146/97/3774#301-procedury-i-funkcje-wbudowane-zadanie-funkcja-zwracajaca-nazwe-uzytkownika-o-wskazanym-identyfikatorze" class="clearfix">Zadanie: Funkcja zwracająca nazwę użytkownika o wskazanym identyfikatorze</a></li>
                                                        <li class="list-group-item ">
                                <a href="https://kodilla.com/pl/bootcamp-module/146/97/3774#submodule-457" class="clearfix">
                                    <p>30.2. Kursory i zaawansowane funkcje i procedury</p>
                                    <i class="fa fa-check-circle-o"></i>
                                    <i class="fa fa-play-circle-o"></i>
                                    <i class="fa fa-send-o"></i>
                                    <i class="fa fa-exclamation-circle"></i>
                                </a>
                            </li><li class="list-group-item list-group-flush sub task"><a href="https://kodilla.com/pl/bootcamp-module/146/97/3774#302-kursory-i-zaawansowane-funkcje-i-procedury-zadanie-oznaczamy-bestsellery" class="clearfix">Zadanie: Oznaczamy bestsellery</a></li>
                                                        <li class="list-group-item ">
                                <a href="https://kodilla.com/pl/bootcamp-module/146/97/3774#submodule-458" class="clearfix">
                                    <p>30.3. Procedury i funkcje - informacje uzupełniające</p>
                                    <i class="fa fa-check-circle-o"></i>
                                    <i class="fa fa-play-circle-o"></i>
                                    <i class="fa fa-send-o"></i>
                                    <i class="fa fa-exclamation-circle"></i>
                                </a>
                            </li><li class="list-group-item list-group-flush sub "><a href="https://kodilla.com/pl/bootcamp-module/146/97/3774#303-procedury-i-funkcje-informacje-uzupelniajace-analiza-stanu-procedur-skladowanych-w-bazie-danych" class="clearfix">Analiza stanu procedur składowanych w bazie danych</a></li><li class="list-group-item list-group-flush sub "><a href="https://kodilla.com/pl/bootcamp-module/146/97/3774#303-procedury-i-funkcje-informacje-uzupelniajace-wywolanie-procedury-skladowanej-z-kodu-w-javie" class="clearfix">Wywołanie procedury składowanej z kodu w Javie</a></li><li class="list-group-item list-group-flush sub task"><a href="https://kodilla.com/pl/bootcamp-module/146/97/3774#303-procedury-i-funkcje-informacje-uzupelniajace-zadanie-wywolanie-procedury-updatebestsellers-z-poziomu-javy" class="clearfix">Zadanie: Wywołanie procedury UpdateBestsellers z poziomu Javy</a></li>
                                                        <li class="list-group-item ">
                                <a href="https://kodilla.com/pl/bootcamp-module/146/97/3774#submodule-459" class="clearfix">
                                    <p>30.4. Wyzwalacze</p>
                                    <i class="fa fa-check-circle-o"></i>
                                    <i class="fa fa-play-circle-o"></i>
                                    <i class="fa fa-send-o"></i>
                                    <i class="fa fa-exclamation-circle"></i>
                                </a>
                            </li><li class="list-group-item list-group-flush sub "><a href="https://kodilla.com/pl/bootcamp-module/146/97/3774#304-wyzwalacze-prosty-wyzwalacz" class="clearfix">Prosty wyzwalacz</a></li><li class="list-group-item list-group-flush sub "><a href="https://kodilla.com/pl/bootcamp-module/146/97/3774#304-wyzwalacze-zaawansowane-wyzwalacze-i-tabele-audytowe" class="clearfix">Zaawansowane wyzwalacze i tabele audytowe</a></li><li class="list-group-item list-group-flush sub task"><a href="https://kodilla.com/pl/bootcamp-module/146/97/3774#304-wyzwalacze-zadanie-audytujemy-ksiazki-oraz-czytelnikow" class="clearfix">Zadanie: Audytujemy książki oraz czytelników</a></li>
                                                        <li class="list-group-item ">
                                <a href="https://kodilla.com/pl/bootcamp-module/146/97/3774#submodule-460" class="clearfix">
                                    <p>30.5. Widoki i zdarzenia</p>
                                    <i class="fa fa-check-circle-o"></i>
                                    <i class="fa fa-play-circle-o"></i>
                                    <i class="fa fa-send-o"></i>
                                    <i class="fa fa-exclamation-circle"></i>
                                </a>
                            </li><li class="list-group-item list-group-flush sub "><a href="https://kodilla.com/pl/bootcamp-module/146/97/3774#305-widoki-i-zdarzenia-widoki" class="clearfix">Widoki</a></li><li class="list-group-item list-group-flush sub "><a href="https://kodilla.com/pl/bootcamp-module/146/97/3774#305-widoki-i-zdarzenia-integracyjne-zastosowanie-widokow" class="clearfix">Integracyjne zastosowanie widoków</a></li><li class="list-group-item list-group-flush sub "><a href="https://kodilla.com/pl/bootcamp-module/146/97/3774#305-widoki-i-zdarzenia-zdarzenia" class="clearfix">Zdarzenia</a></li><li class="list-group-item list-group-flush sub task"><a href="https://kodilla.com/pl/bootcamp-module/146/97/3774#305-widoki-i-zdarzenia-zadanie-tworzenie-zdarzenia-korzystajacego-z-widoku" class="clearfix">Zadanie: Tworzenie zdarzenia korzystającego z widoku</a></li>
                                                        <li class="list-group-item ">
                                <a href="https://kodilla.com/pl/bootcamp-module/146/97/3774#submodule-461" class="clearfix">
                                    <p>30.6. Indeksy i plany zapytań</p>
                                    <i class="fa fa-check-circle-o"></i>
                                    <i class="fa fa-play-circle-o"></i>
                                    <i class="fa fa-send-o"></i>
                                    <i class="fa fa-exclamation-circle"></i>
                                </a>
                            </li><li class="list-group-item list-group-flush sub "><a href="https://kodilla.com/pl/bootcamp-module/146/97/3774#306-indeksy-i-plany-zapytan-przygotowanie-danych-testowych" class="clearfix">Przygotowanie danych testowych</a></li><li class="list-group-item list-group-flush sub "><a href="https://kodilla.com/pl/bootcamp-module/146/97/3774#306-indeksy-i-plany-zapytan-analiza-wydajnosci" class="clearfix">Analiza wydajności</a></li><li class="list-group-item list-group-flush sub "><a href="https://kodilla.com/pl/bootcamp-module/146/97/3774#306-indeksy-i-plany-zapytan-indeks-typu-btree" class="clearfix">Indeks typu BTREE</a></li><li class="list-group-item list-group-flush sub "><a href="https://kodilla.com/pl/bootcamp-module/146/97/3774#306-indeksy-i-plany-zapytan-tworzenie-indeksu" class="clearfix">Tworzenie indeksu</a></li><li class="list-group-item list-group-flush sub task"><a href="https://kodilla.com/pl/bootcamp-module/146/97/3774#306-indeksy-i-plany-zapytan-zadanie-indeksy-dla-biblioteki" class="clearfix">Zadanie: Indeksy dla biblioteki</a></li>
                                                    <div class="ps-scrollbar-x-rail" style="left: 0px; bottom: 3px;"><div class="ps-scrollbar-x" tabindex="0" style="left: 0px; width: 0px;"></div></div><div class="ps-scrollbar-y-rail" style="top: 0px; height: 409px; right: 3px;"><div class="ps-scrollbar-y" tabindex="0" style="top: 0px; height: 102px;"></div></div></ul>
                        <div class="card-block text-center">
                                                                                                <a href="https://kodilla.com/pl/bootcamp-dashboard/146">Powrót do dashboardu</a>
                                                                                    </div>
                    </section>
                </aside>
            </div>
        </section>
    </div>
    <section class="container module-content">
        <div class="row">
            <main class="col-md-8">
                <section class="card">
                    <div class="card-block module-header clearfix ">
                        <h1 class="card-title">30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki</h1>
                                                <i class="fa fa-bookmark fa-3x" aria-hidden="true"></i>
                    </div>
                                        <div class="card-block challenge">
                        <h3>Wyzwania:</h3>
                        <ul>
	<li>poznasz sekwencje i wyzwalacze,</li>
	<li>nauczysz się optymalizować bazę danych przy pomocy indeksów,</li>
	<li>zdobędziesz umiejętność pisania procedur składowanych dla bazy <strong>MySQL</strong>.</li>
</ul>

<p>Relacyjne bazy danych, takie jak <strong>MySQL</strong>, oprócz przechowywania danych w tabelach często oferują dodatkowe możliwości. Jedną z nich jest wykonywanie fragmentów kodu przez serwer bazy danych. Kod do tego przeznaczony pisany jest w specjalnych odmianach (rozszerzeniach) języka <strong>SQL</strong>. Fragmenty kodu zapisane na serwerze, które możemy wykonywać w razie potrzeby, nazywamy <strong>procedurami</strong> lub <strong>funkcjami składowanymi</strong> (ang. <i>stored procedures/functions</i>). Oprócz tego mamy do dyspozycji inne zaawansowane mechanizmy bazodanowe, jak na przykład wyzwalacze (ang. <i>triggers</i>), sekwencje (ang. <i>sequences</i>) czy zdarzenia (ang. <i>events</i>).</p>

<p>Poszczególne rodzaje baz danych często różnią się składnią rozszerzonego SQL używanego do tworzenia procedur i funkcji. Niestety, mimo znacznych podobieństw, należy przy rozpoczynaniu pracy z daną bazą danych poznać składnię poleceń rozszerzonego SQL specyficzną dla danej bazy danych.</p>

<p>Niekiedy dialekty języka SQL doczekały się nawet swoich własnych nazw. Na przykład dla bazy <strong>ORACLE</strong> dialekt rozszerzony języka <strong>SQL</strong> nazywa się <strong>PL/SQL</strong>, a dla bazy <strong>Microsoft SQL Server</strong> dialekt rozszerzony ma nazwę <strong>T-SQL</strong> (możesz się spotkać z takimi nazwami na przykład w ofertach pracy).</p>

<p>W tym module omówimy rozszerzony <strong>SQL</strong> dla bazy danych <strong>MySQL</strong>.</p>

                    </div>
                                    </section>
                                    
                <section id="submodule-455" class="card submodule current" data-bootcamp-user-submodule-id="310995">
                <!-- klasy dla section: completed current comments -->
                    <div class="card-block submodule-header clearfix">
                        <i class="fa fa-check-circle-o fa-2x"></i>
                        <i class="fa fa-play-circle-o fa-2x"></i>
                        <i class="fa fa-exclamation-circle fa-2x"></i>
                        <i class="fa fa-send-o fa-2x"></i>
                        <h2 class="bootcamp-submodule-name">30.1. <span>Procedury i funkcje wbudowane</span></h2>
                                            </div>
                    <div class="card-block">
                        <div class="submodule-content">
                            <p>Nim rozpoczniemy naszą przygodę z procedurami wbudowanymi i funkcjami <strong>MySQL</strong>, przygotujemy sobie środowisko do pracy. </p>

<h3 id="301-procedury-i-funkcje-wbudowane-przygotowanie-srodowiska-i-danych-testowych">Przygotowanie środowiska i danych testowych</h3>

<p>Na samym początku zaloguj się do MySQL Shell jako root i wykonaj:
    <code class=" language-sql">set global log_bin_trust_function_creators=1;</code>. Dokładne wyjaśnienie znaczenia zmiennej znajduje się w <a href="https://dev.mysql.com/doc/refman/5.0/en/stored-programs-logging.html" target="_blank">dokumentacji</a>.
</p>

<p>Do realizacji zadań związanych z procedurami i funkcjami potrzebne nam będą:</p>

<ul>
	<li>tabela zawierająca dane o książkach (<code class=" language-sql">BOOKS</code>)</li>
	<li>tabela zawierająca dane o czytelnikach (<code class=" language-sql">READERS</code>)</li>
	<li>tabela zawierająca informacje o wypożyczeniach (<code class=" language-sql">RENTS</code>)</li>
</ul>
<p>oraz garść gotowych danych testowych w tych tabelach.</p>

<p>Rozpocznij od utworzenia tabeli <strong>BOOKS</strong>:</p>

<a class="img-modal-group" href="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_00.png" style="width: 100%"><img src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_00.png" style="width: auto; max-width: 100%;"></a>

<p>Następnie utwórz tabelę <strong>READERS</strong>:</p>

<a class="img-modal-group" href="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_01.png" style="width: 100%"><img src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_01.png" style="width: auto; max-width: 100%;"></a>

<p>Jako ostatnią utwórz tabelę <strong>RENTS</strong>:</p>

<a class="img-modal-group" href="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_02.png" style="width: 100%"><img src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_02.png" style="width: auto; max-width: 100%;"></a>

<p>Tabele są już utworzone. Teraz wygeneruj trochę danych testowych:</p>

<pre class="line-numbers language-sql code-toolbar"><code class=" language-sql">INSERT INTO READERS(FIRSTNAME, LASTNAME, PESELID)
     VALUES ("John", "Smith", "83012217938");

INSERT INTO READERS(FIRSTNAME, LASTNAME, PESELID)
     VALUES ("Curtis", "Wilson", "75121002790");

INSERT INTO READERS(FIRSTNAME, LASTNAME, PESELID)
     VALUES ("Cathy", "Booker", "90112801727");

INSERT INTO READERS(FIRSTNAME, LASTNAME, PESELID)
     VALUES ("Marissa", "Cain", "84061908044");

INSERT INTO READERS(FIRSTNAME, LASTNAME, PESELID)
     VALUES ("Muriel", "Fulton", "76081409269");

COMMIT;

INSERT INTO BOOKS(TITLE, PUBYEAR)
     VALUES ("The Stranger", 1942);

INSERT INTO BOOKS(TITLE, PUBYEAR)
     VALUES ("In Search of Lost Time", 1927);

INSERT INTO BOOKS(TITLE, PUBYEAR)
     VALUES ("The Trial", 1925);

INSERT INTO BOOKS(TITLE, PUBYEAR)
     VALUES ("The Little Prince", 1943);

INSERT INTO BOOKS(TITLE, PUBYEAR)
     VALUES ("Man's Fate", 1933);

COMMIT;

INSERT INTO RENTS(BOOK_ID, READER_ID, RENT_DATE, RETURN_DATE)
     VALUES (1, 1, DATE_SUB(CURDATE(), INTERVAL 10 DAY), null);

INSERT INTO RENTS(BOOK_ID, READER_ID, RENT_DATE, RETURN_DATE)
     VALUES (2, 1, DATE_SUB(CURDATE(), INTERVAL 10 DAY), null);

INSERT INTO RENTS(BOOK_ID, READER_ID, RENT_DATE, RETURN_DATE)
     VALUES (4, 1, DATE_SUB(CURDATE(), INTERVAL 10 DAY), DATE_SUB(CURDATE(), INTERVAL 5 DAY));

INSERT INTO RENTS(BOOK_ID, READER_ID, RENT_DATE, RETURN_DATE)
     VALUES (1, 3, DATE_SUB(CURDATE(), INTERVAL 8 DAY), null);

INSERT INTO RENTS(BOOK_ID, READER_ID, RENT_DATE, RETURN_DATE)
     VALUES (5, 3, DATE_SUB(CURDATE(), INTERVAL 4 DAY), DATE_SUB(CURDATE(), INTERVAL 2 DAY));

INSERT INTO RENTS(BOOK_ID, READER_ID, RENT_DATE, RETURN_DATE)
     VALUES (5, 4, DATE_SUB(CURDATE(), INTERVAL 10 DAY), DATE_SUB(CURDATE(), INTERVAL 8 DAY));

INSERT INTO RENTS(BOOK_ID, READER_ID, RENT_DATE, RETURN_DATE)
     VALUES (5, 5, DATE_SUB(CURDATE(), INTERVAL 8 DAY), null);

COMMIT;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code><div class="toolbar"></div></pre>

<div class="bc-note alert-info">
    <h4 class="alert-heading text-center">Funkcje operujące na datach w MySQL</h4>
    <p>MySQL oferuje bogaty zestaw funkcji, pozwalających na wykonywanie operacji na datach.</p>
    <p>Ich pełny wykaz możesz znaleźć <a href="https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html" target="_blank">tutaj</a>.</p>

    <p>Użyta w powyższym skrypcie funkcja <code class=" language-sql">CURDATE()</code> zwraca aktualną datę systemową w formacie "YYYY-MM-DD" lub YYYYMMDD, w zależności od tego, czy jest użyta w kontekście tekstowym, czy numerycznym. Na przykład:</p>
    <ul>
        <li><code class=" language-sql">SELECT CURDATE();</code> zwróci: "2017-10-25"</li>
        <li><code class=" language-sql">SELECT CURDATE() + 0;</code> zwróci 20171025</li>
    </ul>
    <p>Przy operowaniu na datach przydatna jest również funkcja <code class=" language-sql">DATE_SUB()</code>, przy pomocy której możemy odjąć od wskazanej daty wybraną liczbę dni, miesięcy lub lat.</p>
</div>

<p>Dane testowe zostały załadowane do tabel. Czas zająć się procedurami i funkcjami :)</p>

<h3 id="301-procedury-i-funkcje-wbudowane-definiowanie-pierwszych-procedur">Definiowanie pierwszych procedur</h3>

<p>W języku Java pisaliśmy w klasach metody. W bazie <strong>MySQL</strong> możemy zrobić podobnie — mamy możliwość pisania procedur i funkcji. Są to pojęcia znane bardziej z programowania strukturalnego, jednak aby je wyjaśnić, można użyć bardzo prostej analogii do programowania obiektowego:</p>

<ul>
    <li>funkcje w <strong>MySQL</strong> są jak metody w Javie, które zwracają jakieś wartości</li>
    <li>procedury w <strong>MySQL</strong> są jak metody w Javie, które nie zwracają żadnych wartości (czyli zwracają <strong>void</strong>)</li>
</ul>

<p>Spróbujemy teraz zdefiniować jakieś przykładowe procedury i funkcje w <strong>MySQL</strong>. Uruchom <strong>MySQL Workbench</strong> i zaloguj się jako użytkownik <strong>kodilla_user</strong>. Dostęp do zdefiniowanych procedur i funkcji w <strong>MySQL Workbenchu</strong> uzyskujemy poprzez drzewo ze strukturą bazy danych po lewej stronie ekranu:</p>

<a class="img-modal-group" href="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_03.png" style="width: 100%"><img src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_03.png" style="width: auto; max-width: 100%;"></a>

<p>Aby napisać własną procedurę, musisz najpierw poznać polecenie &lt;<code class=" language-sql">&gt;DELIMITER</code>. Pozwala ono na ustawienie innego niż średnik znacznika końca polecenia.</p>

<p>Procedury składają się najczęściej z więcej niż jednej linii poleceń <strong>SQL</strong> (a każda z nich kończy się średnikiem). Naszym celem jest przesłanie do serwera całej procedury (jednym poleceniem <strong>SQL</strong>), dlatego też musimy koniec procedury oznaczyć w inny niż standardowy sposób, czyli nie średnikiem. Ogólna struktura polecenia będzie więc wyglądała następująco:</p>

<a class="img-modal-group" href="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_04.png" style="width: 100%"><img src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_04.png" style="width: auto; max-width: 100%;"></a>

<p>W powyższym kawałku kodu robimy następujące operacje:</p>
<ul>
    <li>W linii nr 1 zmieniamy standardowy <strong>delimiter</strong> ze średnika na znak podwójnego dolara: <strong>$$</strong>.</li>
    <li>W linii nr 3 w przyszłości (za chwilę) znajdzie się definicja naszej pierwszej procedury.</li>
    <li>Linia nr 5 to przywrócenie domyślnego <strong>delimitera</strong>, czyli średnika.</li>
</ul>

<p>Linia nr 5 jest ważna, ponieważ gdybyśmy jej nie wykonali, przestałyby się wykonywać nasze standardowe polecenia <strong>SQL</strong> zakończone średnikiem (<strong>MySQL Workbench</strong> oczekiwałby zakańczania poleceń <strong>SQL</strong> przy pomocy znaku podwójnego dolara).</p>

<p>Stworzymy teraz definicję naszej pierwszej procedury:</p>

<a class="img-modal-group" href="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_05.png" style="width: 100%"><img src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_05.png" style="width: auto; max-width: 100%;"></a>

<p>Przeanalizujmy powyższy kod:</p>

<ul>
    <li>W linii nr 1 przełączamy <strong>delimiter</strong> na znak podwójnego dolara <strong>$$</strong>, ponieważ wewnątrz deklarowanej procedury występuje średnik, który zostałby zinterpretowany jako koniec polecenia (linia 5) — nam natomiast zależy na tym, aby cała deklaracja procedury (linie 3-6) została przesłana na serwer bazy danych jako pojedyncze polecenie.</li>
    <li>Linia nr 3 to początek deklaracji procedury. Procedurę tworzymy przy pomocy polecenia <strong>CREATE PROCEDURE <procedure_name>()</procedure_name></strong>, gdzie nazwa tworzonej procedury powinna być zakończona nawiasami <strong>()</strong>.</li>
    <li>Linie 4-6 to ciało procedury, zawiera się ono zawsze pomiędzy słowami kluczowymi <strong>BEGIN</strong> oraz <strong>END</strong>.</li>
    <li>W linii 5 jest to, co procedura faktycznie wykonuje, czyli pobiera wszystkie rekordy z tabeli <strong>BOOKS</strong>.</li>
    <li>Linia 6 kończy się znakiem <strong>$$</strong> zamiast średnikiem, ponieważ w tym miejscu <strong>delimiter</strong> przestawiony jest właśnie na znak podwójnego dolara.</li>
    <li>W linii nr 8 przywracamy domyślny <strong>delimiter</strong>, czyli średnik.</li>
</ul>

<p>Po wykonaniu powyższego kodu masz w bazie danych zdefiniowaną swoją pierwszą procedurę składowaną! Możesz to sprawdzić po odświeżeniu i rozwinięciu gałęzi <i>Stored Procedures</i> w <strong>MySQL Workbenchu</strong>:</p>

<a class="img-modal-group" href="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_06.png" style="width: 100%"><img src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_06.png" style="width: auto; max-width: 100%;"></a>

<p>Jeżeli interesuje Cię więcej szczegółów dotyczących tworzenia procedur składowanych w <strong>MySQL</strong>, warto przeczytać <a href="https://dev.mysql.com/doc/refman/5.7/en/create-procedure.html" target="_blank">oficjalną dokumentację</a> dotyczącą tworzenia procedur składowanych.</p>

<p>Aby uruchomić procedurę napisz polecenie:</p>

<a class="img-modal-group" href="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_07.png" style="width: 100%"><img src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_07.png" style="width: auto; max-width: 100%;"></a>

<p>W ten sposób stworzyliśmy pierwszą procedurę składowaną oraz ją uruchomiliśmy.</p>

<h3 id="301-procedury-i-funkcje-wbudowane-modyfikowanie-wczesniej-utworzonych-procedur">Modyfikowanie wcześniej utworzonych procedur</h3>

<p>Aby zmodyfikować treść procedury, należy ją zadeklarować na nowo, uprzednio usuwając. Jeżeli nie usuniesz wcześniej procedury, <strong>MySQL</strong> zgłosi błąd, że procedura o podanej nazwie już istnieje. Jeżeli natomiast spróbujesz usunąć procedurę, której nie ma w bazie danych, <strong>MySQL</strong> również zgłosi błąd. Jak więc można napisać skrypt, który zawsze wykona się bez błędów?</p>

<p>Na szczęście jest rozwiązanie. W <strong>MySQL</strong> dostępne jest polecenie</p>

<pre class="line-numbers language-sql code-toolbar"><code class=" language-sql">DROP PROCEDURE IF EXISTS &lt;procedure_name&gt;;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code><div class="toolbar"></div></pre>

<p>gdzie <strong>procedure_name</strong> to nazwa procedury, która ma być usunięta. Jej działanie polega na usunięciu procedury składowanej o podanej nazwie, o ile taka procedura istnieje w bazie danych. Jeżeli nie istnieje, <strong>MySQL</strong> nie podejmie po prostu żadnej akcji.</p>

<p>Aby zmodyfikować treść naszej procedury, utwórz więc następujący skrypt w <strong>MySQL Workbenchu</strong>:</p>

<a class="img-modal-group" href="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_08.png" style="width: 100%"><img src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_08.png" style="width: auto; max-width: 100%;"></a>

<p>Zmieniliśmy <strong>SELECT *</strong> na polecenie <strong>SELECT</strong> z podaniem <i>explicite</i> listy kolumn, które mają być wyświetlane. Przed przedefiniowaniem procedury, poprzednią jej wersję usuwamy poleceniem <code class=" language-sql">DROP PROCEDURE IF EXISTS &lt;procedure_name&gt;</code>.</p>

<h3 id="301-procedury-i-funkcje-wbudowane-procedury-kontra-funkcje">Procedury kontra funkcje</h3>

<p>Jak wspomnieliśmy już wcześniej, procedury w <strong>MySQL</strong> są odpowiednikiem Javowych metod nie zwracających żadnych wartości (czyli <strong>void)</strong>. Odpowiednikiem metod zwracających jakieś wartości w <strong>MySQL</strong> są funkcje. Sposób definiowania funkcji pokazano poniżej:</p>

<a class="img-modal-group" href="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_09.png" style="width: 100%"><img src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_09.png" style="width: auto; max-width: 100%;"></a>

<p>Powyższa funkcja, o nazwie <code class=" language-sql">VipLevel()</code>, ma zwracać informację o poziomie <strong>VIP</strong> każdego klienta. Póki co, dla każdego klienta ma zwracać informację <strong>"Standard customer"</strong>. Później ją rozbudujemy, aby przekazywała różne poziomy <strong>VIP</strong> w zależności od ilości wypożyczanych książek miesięcznie. Na razie jednak skupimy się na tym, jak zadeklarować taką najprostszą funkcję, która zwraca stały tekst. Przeanalizujmy więc co się dzieje w powyższym kodzie:</p>

<ul>
    <li>W linii nr 1 usuwamy poprzednią wersję funkcji <code class=" language-sql">VipLevel()</code>, o ile istnieje już w bazie danych. Robimy to przy pomocy polecenia <code class=" language-sql">DROP FUNCTION IF EXISTS &lt;function_name&gt;</code>, która działa analogicznie do poznanej przed chwilą instrukcji usuwającej procedury.</li>
    <li>W liniach nr 3 oraz nr 10 ustawiamy <code class=" language-sql">delimiter</code> na znak podwójnego dolara <code class=" language-sql">$$</code> (na czas definiowania ciała funkcji), a następnie przywracamy domyślny <code class=" language-sql">delimiter</code> w postaci znaku średnika.</li>
    <li>Linia nr 5 to nagłówek deklaracji funkcji. Omówimy go nieco bardziej szczegółowo:
        <a class="img-modal-group" href="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_10.png" style="width: 100%"><img src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_10.png" style="width: auto; max-width: 100%;"></a>
        <ul>
            <li>opcjonalna <strong>lista argumentów</strong> — omówimy ją później w części poświęconej argumentom procedur i funkcji</li>
            <li><strong>typ zwracanych danych</strong> — informuje <strong>MySQL</strong> o tym, jakie dane będą zwracane przez funkcję (analogicznie do typu zwracanego przez metodę w Javie. Możemy tu używać dowolnego z typów danych obsługiwanych przez <strong>MySQL</strong> — w razie potrzeby wróć do modułu poświęconego <strong>JDBC</strong>, aby sobie przypomnieć, jakie typy danych są dostępne w <strong>MySQL</strong>)</li>
            <li><strong>charakterystyka funkcji</strong> — jeżeli funkcja zwraca zawsze te same dane dla tych samych wartości parametrów, wówczas powinna być oznaczona jako <strong><code class=" language-sql">DETERMINISTIC</code></strong>, jeżeli jednak zwracane dane mogą być różne przy kolejnych wywołaniach, nawet przy tych samych wartościach parametrów, wówczas powinna być oznaczona jako <strong><code class=" language-sql">NOT DETERMINISTIC</code></strong>. Domyślnym oznaczeniem jest <strong><code class=" language-sql">NOT DETERMINISTIC</code></strong>. Ustawienie charakterystyki funkcji na <strong><code class=" language-sql">DETERMINISTIC</code></strong> poprawia wydajność zapytań z udziałem tej funkcji. Należy jednak uważać z tym ustawieniem — niepoprawne oznaczenie funkcji jako <strong><code class=" language-sql">DETERMINISTIC</code></strong> może prowadzić do trudnych w wykryciu błędów lub znacznego spadku wydajności.</li>
        </ul>
    </li><li>Linie od nr 6 do nr 8 to definicja ciała funkcji. W naszym przypadku to po prostu zwrócenie stałego tekstu <strong>"Standard customer"</strong>.</li>
    <li>W linii nr 12 wywołujemy zadeklarowaną przez nas funkcję. W przypadku funkcji nie stosujemy polecenia <code class=" language-sql">CALL</code>, jak przy procedurach. Stosujemy je jako argumenty polecenia <code class=" language-sql">SELECT</code>. Zastosowaliśmy tu również nadanie kolumnie <strong>aliasu</strong> (czyli nazwy pod jaką będzie widoczna w wyniku zapytania) przy pomocy instrukcji <code class=" language-sql">AS &lt;alias_name&gt;</code>, gdzie <code class=" language-sql">alias_name</code> to nazwa, pod którą kolumna będzie widoczna w wynikach zapytania.</li>
</ul>

<p>Wynik działania naszej funkcji przedstawiono poniżej:</p>

<a class="img-modal-group" href="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_11.png" style="width: 100%"><img src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_11.png" style="width: auto; max-width: 100%;"></a>

<h3 id="301-procedury-i-funkcje-wbudowane-zmienne-i-przekazywanie-argumentow-do-procedur-i-funkcji">Zmienne i przekazywanie argumentów do procedur i funkcji</h3>

<p>W funkcjach i procedurach, tak samo jak w Javowych metodach, możemy deklarować zmienne. Ogólna składnia deklaracji zmiennej wygląda następująco:</p>

<a class="img-modal-group" href="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_12.png" style="width: 100%"><img src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_12.png" style="width: auto; max-width: 100%;"></a>

<p>Typem zmiennej może być dowolny z typów danych dostępnych w <strong>MySQL</strong>, na przykład: <code class=" language-sql">VARCHAR(50)</code>. Każda zadeklarowana zmienna początkowo ma wartość <code class=" language-sql">NULL</code>. Jeżeli chcesz nadać jej wartość początkową możesz skorzystać z opcjonalnej frazy <code class=" language-sql">DEFAULT</code>, gdzie za <code class=" language-sql">default_value</code> należy podać początkową wartość domyślną zmiennej.</p>

<p>W poniższym kodzie deklarujemy zmienną tekstową <code class=" language-sql">result</code> i przypisujemy jej wartość początkową <strong>"Standard customer"</strong>:</p>

<a class="img-modal-group" href="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_13.png" style="width: 100%"><img src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_13.png" style="width: auto; max-width: 100%;"></a>

<p>W powyższym kodzie w linii nr 7 deklarujemy zmienną o nazwie <code class=" language-sql">result</code>. W linii nr 8 wykorzystujemy tę zmienną do zwrócenia wartości z funkcji. Prawie jak w Javie, prawda? :) Zmienne utworzone w ten sposób są zmiennymi lokalnymi procedury/funkcji.</p>


<div class="bc-note alert-info">
    <h4 class="alert-heading text-center">Zmienne globalne (sesyjne) w MySQL</h4>
    <p>W <strong>MySQL</strong> zmienne są domyślnie zmiennymi lokalnymi procedury/funkcji, w której zostały zadeklarowane. Aby zmienna stała się czymś w rodzaju zmiennej statycznej z Javy, czyli zmiennej utrzymującej swoją wartość podczas całego czasu trwania sesji (połączenia aplikacji z bazą danych), wystarczy jej nazwę poprzedzić znakiem <strong>@</strong>, na przykład:</p>
        <pre class="line-numbers language-sql code-toolbar"><code class=" language-sql">DECLARE @globalvar INT(4) DEFAULT 0;&lt;/pre&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code><div class="toolbar"></div></pre></div>

<p>Procedury i funkcje <strong>MySQL</strong> mogą posiadać również argumenty (tak samo jak w Javie). Wystarczy po nazwie metody, wewnątrz nawiasów podać listę argumentów w postaci:</p>

<pre class="line-numbers language-sql code-toolbar"><code class=" language-sql">&lt;arg_name&gt; &lt;arg_type&gt; [, …]<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code><div class="toolbar"></div></pre>

<p>gdzie <code class=" language-sql">arg_name</code> jest nazwą zmiennej argumentu, natomiast <code class=" language-sql">arg_type</code> jest typem argumentu (można podać dowolny z typów dostępnych w <code class=" language-sql">MySQL</code> wraz z rozmiarem lub z rozmiarem domyślnym, np. <code class=" language-sql">INT</code>).</p>

<p>Przypisywanie wartości do zmiennych realizujemy przy pomocy instrukcji <code class=" language-sql">SET</code>, w poniższej postaci:</p>

<pre class="line-numbers language-sql code-toolbar"><code class=" language-sql">SET &lt;var_name&gt; = &lt;value&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code><div class="toolbar"></div></pre>

<p>gdzie <code class=" language-sql">&lt;var_name&gt;</code> to nazwa zmiennej, a <code class=" language-sql">&lt;value&gt;</code> to wartość, którą chcemy do zmiennej przypisać.</p>

<p>W procedurach i funkcjach dostępna jest również instrukcja warunkowa <code class=" language-sql">IF</code> o poniższej składni:</p>

<pre class="line-numbers language-sql code-toolbar"><code class=" language-sql">IF &lt;condition&gt; THEN
&lt;instructions_if_true&gt;
ELSEIF &lt;condition2&gt; THEN
&lt;instructions_if_true2&gt;
ELSE
&lt;else_instructions&gt;
END IF<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code><div class="toolbar"></div></pre>

<p>gdzie <code class=" language-sql">&lt;instructions_if_true&gt;</code> jest zestawem instrukcji, które mają się wykonać, gdy wyrażenie <code class=" language-sql">&lt;condition&gt;</code> zwróci <code class=" language-sql">true</code>, <code class=" language-sql">&lt;instructions_if_true2&gt;</code> jest zestawem instrukcji, które wykonają się gdy warunek <code class=" language-sql">&lt;condition&gt;</code> nie jest spełniony, natomiast spełniony jest warunek <code class=" language-sql">&lt;condition2&gt;</code>, oraz gdzie <code class=" language-sql">&lt;else_iinstructions&gt;</code> jest zestawem instrukcji, które zostaną wykonane w przeciwnym wypadku, czyli gdy ani <code class=" language-sql">&lt;condition&gt;</code>, ani <code class=" language-sql">&lt;condition2&gt;</code> nie są spełnione.</p>

<p>Podczas definiowania warunków mamy do dyspozycji operatory logiczne <code class=" language-sql">AND</code>, <code class=" language-sql">OR</code> oraz <code class=" language-sql">NOT</code>, analogiczne do operatorów <code class=" language-sql">&amp;&amp;</code>, <code class=" language-sql">||</code> oraz <code class=" language-sql">!</code> z języka Java.</p>

<p>Posiadając powyższą wiedzę zmodyfikuj funkcję <code class=" language-sql">VipLevel()</code> według poniższego wzoru:</p>

<a class="img-modal-group" href="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_14.png" style="width: 100%"><img src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_14.png" style="width: auto; max-width: 100%;"></a>

<p>Przeanalizujmy powyższy kod:</p>

<ul>
    <li>W linii nr 5 pojawił się argument funkcji: <code class=" language-sql">booksrented INT</code> — od teraz podczas wywoływania funkcji <code class=" language-sql">VipLevel()</code> trzeba będzie podawać argument oznaczający liczbę wypożyczanych przez użytkownika książek w skali miesiąca.</li>
    <li>W liniach od nr 8 do nr 16 znajduje się seria instrukcji warunkowych, które w zależności od średniej miesięcznej liczby wypożyczeń użytkownika, przypisuje do zmiennej <code class=" language-sql">result</code> nazwę statusu <strong>VIP</strong> danego użytkownika biblioteki.</li>
    <li>Zauważ, że w liniach nr 14 i 15 wstawiamy do zmiennej <code class=" language-sql">result</code> tekst <strong>"Standard customer"</strong>, gdy nie jest spełniony żaden z wcześniejszych warunków. Instrukcje te są tak naprawdę niepotrzebne, ponieważ ustawiliśmy w linii nr 7 wartość domyślną dla zmiennej <code class=" language-sql">result</code>. Linie te umieściliśmy jedynie po to, aby pokazać Ci, że możliwe jest również wywołanie zwykłego <code class=" language-sql">ELSE</code> w instrukcji warunkowej <code class=" language-sql">IF</code>.</li>
    <li>W linii nr 22 zastosowaliśmy przykładowe wywołanie funkcji <code class=" language-sql">VipLevel(booksrented INT)</code>, podając jako parametr <code class=" language-sql">booksrented</code> wartość 12 książek wypożyczanych miesięcznie.</li>
</ul>

<p>Wynik wykonania powyższego kodu pokazano poniżej:</p>

<a class="img-modal-group" href="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_15.png" style="width: 100%"><img src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_15.png" style="width: auto; max-width: 100%;"></a>

<p>W związku z tym, że wartość argumentu <code class=" language-sql">booksrented</code> wyniosła 12, użytkownik uzyskał status <strong>"Gold customer"</strong>.</p>

                        </div>
                    </div>
                                        <div class="card-block task-card">
                        <h3 id="301-procedury-i-funkcje-wbudowane-zadanie-funkcja-zwracajaca-nazwe-uzytkownika-o-wskazanym-identyfikatorze">Zadanie: <span class="task-title">Funkcja zwracająca nazwę użytkownika o wskazanym identyfikatorze</span></h3>
                        <div class="task-content">
                            <p>Parametry przekazywane do funkcji i procedur mogą być również używane w zapytaniach <strong>SQL</strong>, które znajdują się wewnątrz procedur i funkcji. Możesz ich po prostu użyć w zapytaniu. </p>

<p>Posiadając tę wiedzę, napisz funkcję, która jako argument będzie otrzymywała identyfikator użytkownika. W wyniku jej działania, niech zostaną wyświetleni wszyscy użytkownicy o podanym identyfikatorze. </p>

<p>Dodatkowo, jeżeli podano identyfikator mniejszy lub równy zeru, powinien zostać wyświetlony komunikat o niepoprawnym identyfikatorze.</p>

<p>Screen z widokiem kodu funkcji realizującej zadanie z <strong>MySQL Workbencha </strong>wrzuć do narzędzia <strong>scr.hu</strong>, a link do screena wklej poniżej i prześlij do mentora.</p>
                        </div>
                    </div>
                                        <div class="card-block submodule-footer clearfix ">
                                                <div class="clearfix">
                                                                                <a href="https://kodilla.com/pl/bootcamp-task/146/310995" target="_blank" class="btn btn-info-outline">Podgląd zadania</a>
                            <form target="_blank" class="form-inline project-link-form">
                                <div class="form-group">
                                    <input type="text" name="link" class="form-control" value="">
                                </div>
                                <button type="submit" class="btn  btn-success-outline ">Wyślij link <i class="fa fa-check"></i></button>
                            </form>
                                                                                                    </div>
                    </div>
                </section>
                                    
                <section id="submodule-457" class="card submodule " data-bootcamp-user-submodule-id="310996">
                <!-- klasy dla section: completed current comments -->
                    <div class="card-block submodule-header clearfix">
                        <i class="fa fa-check-circle-o fa-2x"></i>
                        <i class="fa fa-play-circle-o fa-2x"></i>
                        <i class="fa fa-exclamation-circle fa-2x"></i>
                        <i class="fa fa-send-o fa-2x"></i>
                        <h2 class="bootcamp-submodule-name">30.2. <span>Kursory i zaawansowane funkcje i procedury</span></h2>
                                            </div>
                    <div class="card-block">
                        <div class="submodule-content">
                            <p>Rozbudujemy teraz naszą tabelę czytelników (<strong>READERS</strong>) o kolumnę określającą status VIP danego czytelnika.</p>

<p>Skorzystaj z polecenia:</p>

<a class="img-modal-group" href="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_16.png" style="width: 100%"><img src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_16.png" style="width: auto; max-width: 100%;"></a>

<p>Napiszemy teraz procedurę wypełniającą nowe pole <strong>VIP_LEVEL</strong>. </p>

<h4>Obliczanie wartości średniej ilości wypożyczeń</h4>

<p>Rozpocznijmy od prostej procedury:</p>

<a class="img-modal-group" href="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_17.png" style="width: 100%"><img src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_17.png" style="width: auto; max-width: 100%;"></a>

<p>W procedurze tej pojawia się nowa konstrukcja językowa:</p>

<pre class="line-numbers language-sql code-toolbar"><code class=" language-sql">SELECT &lt;select_expression&gt; INTO &lt;variable&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code><div class="toolbar"></div></pre>

<p>Konstrukcja ta przypisuje wynik zapytania <code class=" language-sql">&lt;select_expression&gt;</code> do zmiennej <code class=" language-sql">&lt;variable&gt;</code>. Musisz jednak uważać, aby, zapytanie <code class=" language-sql">&lt;select_expression&gt;</code> zwracało pojedynczą wartość, czyli było zapytaniem skalarnym.</p>



<div class="bc-note alert-info">
    <h4 class="alert-heading text-center">Zapytania skalarne</h4>
    <p>Zapytanie, które zwraca jedną liczbę - na przykład sumę wartości kolumny danej tabeli (tutaj sumę wartości kolumny <code class=" language-sql">AGE</code> w tabeli <code class=" language-sql">USERS</code>):</p>
    
    <pre class="line-numbers language-sql code-toolbar"><code class=" language-sql">SELECT SUM(AGE) FROM USERS<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code><div class="toolbar"></div></pre>
        
   <p>nazywamy <strong>zapytaniem skalarnym</strong>. Jego wynikiem jest jedna liczba.</p>
   <p>Zapytania, które nie są skalarne zwracają wiele wartości (kolumn), jak w poniższym zapytaniu:</p>
   
   <pre class="line-numbers language-sql code-toolbar"><code class=" language-sql">SELECT * FROM USERS WHERE USER_ID = 1;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code><div class="toolbar"></div></pre>
   
  <p>lub też zwracają wiele rekordów danych, jak w zapytaniu poniżej:</p>
  
  <pre class="line-numbers language-sql code-toolbar"><code class=" language-sql">SELECT * FROM USERS;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code><div class="toolbar"></div></pre>
</div>

<p>Przeanalizujmy co robi obecnie powyższa procedura:</p>

<ul>
    <li>W linii nr 7 deklarowana jest zmienna typu <code class=" language-sql">INT</code> o nazwie <code class=" language-sql">BOOKSREAD</code>. Będziemy w niej przechowywali informację o ilości książek wypożyczonych przez czytelnika</li>
    <li>W liniach od 9 do 11 wykonujemy zapytanie, które zwraca ilość książek wypożyczonych przez czytelnika o identyfikatorze równym <code class=" language-sql">3</code>. Wynik zapytania (czyli ilość książek) zapisywana jest w zmiennej <code class=" language-sql">BOOKSREAD</code>.</li>
    <li>W linii nr 13 wyświetlamy w konsoli <strong>MySQL Workbench</strong> wartość zmiennej <code class=" language-sql">BOOKSREAD.</code></li>
</ul>

<p>W tym momencie nasza procedura pobiera jedynie informację o ilości wypożyczonych książek przez czytelnika o identyfikatorze równym <code class=" language-sql">3</code>. </p>

<p>Sprawdź wynik działania naszej procedury:</p>

<a class="img-modal-group" href="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_18.png" style="width: 100%"><img src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_18.png" style="width: auto; max-width: 100%;"></a>

<p>W dolnej części ekranu widoczna jest wyświetlona wartość odczytanej zmiennej <code class=" language-sql">BOOKSREAD</code>.</p>

<p>Oczywiście za chwilę przerobimy ją tak, aby obliczenia były wykonywane dla każdego czytelnika biblioteki po kolei.</p>

<p>Wpierw jednak musimy zbudować wyrażenie obliczające ilość wypożyczonych książek w odniesieniu do pojedynczego miesiąca (czyli średnią ilość wypożyczeń na miesiąc).</p>

<p>Zmodyfikuj procedurę w sposób pokazany poniżej:</p>

<a class="img-modal-group" href="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_19.png" style="width: 100%"><img src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_19.png" style="width: auto; max-width: 100%;"></a>

<p>Dodaliśmy do naszej procedury drugą zmienną typu <code class=" language-sql">INT</code> o nazwie <code class=" language-sql">DAYS</code>, w której będziemy przechowywali informację o łącznej ilości dni, od kiedy dany czytelnik dokonuje wypożyczeń książek w naszej bibliotece. </p>

<p>W liniach od 14 do 16 odczytujemy z tabeli <code class=" language-sql">RENTS</code> wartość maksymalną oraz minimalną pola <code class=" language-sql">RENT_DATE</code> (czyli najwyższą i najniższą datę, z jaką odnotowano wypożyczenie książki), a następnie przy pomocy funkcji wbudowanej <code class=" language-sql">DATEDIFF(date1, date2)</code> obliczamy ilość dni (różnicę) pomiędzy tymi datami. W wyniku otrzymujemy informację od ilu dniu użytkownik o identyfikatorze <code class=" language-sql">3</code> wypożycza w naszej bibliotece książki.</p>

<p>W linii nr 18 wyświetlamy obydwie obliczone wartości.</p>

<p>Wyświetl wynik działania naszej procedury przy pomocy poniższego polecenia:</p>

<a class="img-modal-group" href="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_20.png" style="width: 100%"><img src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_20.png" style="width: auto; max-width: 100%;"></a>

<p>Kolejną modyfikacją procedury będzie obliczenie średniej miesięcznej ilości wypożyczeń:</p>

<a class="img-modal-group" href="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_21.png" style="width: 100%"><img src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_21.png" style="width: auto; max-width: 100%;"></a>

<p>Wprowadziliśmy tu jeszcze jedną zmienną <code class=" language-sql">BOOKSPERMONTH</code> typu <code class=" language-sql">DECIMAL(5,2)</code> (czyli stałoprzecinkową o pięciu znakach, z czego dwa to cyfry po przecinku), w której przechowujemy obliczoną wartość wskaźnika średniej ilości wypożyczeń książek w skali miesiąca. Obliczeń dokonujemy w linii 19.</p>

<p>Wynik wykonania naszej procedury przedstawia się następująco:</p>

<a class="img-modal-group" href="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_22.png" style="width: 100%"><img src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_22.png" style="width: auto; max-width: 100%;"></a>

<h4>Uogólnienie procedury na wszystkich czytelników dzięki kursorowi</h4>

<p>Teraz musimy zadbać o to, aby wartość współczynnika średniej ilości wypożyczeń w miesiącu obliczyć dla wszystkich czytelników.</p>

<p>Do tego celu przyda nam się konstrukcja zwana <strong>kursorem</strong> (<i>ang. cursor</i>).</p>

<p><strong>Kursorów</strong> używamy wówczas, gdy istnieje potrzeba przeiterowania po zbiorze danych, będącym wynikiem zapytania <strong>SQL</strong>. Tak też będzie w naszym przypadku - przygotujemy zapytania zwracające wszystkich czytelników i dla każdego z nich obliczymy wartość <code class=" language-sql">VIP_LEVEL</code>. Spójrzmy tymczasem na deklarację <strong>kursora</strong>:</p>


<pre class="line-numbers language-sql code-toolbar"><code class=" language-sql">DECLARE &lt;cursor_name&gt; CURSOR FOR &lt;select_expression&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code><div class="toolbar"></div></pre>


<p>Powyższa instrukcja tworzy nowy <strong>kursor</strong> o nazwie <strong>cursor_name</strong> iterujący po wynikach zapytania <code class=" language-sql">select_expression</code>.</p>

<p>Praca z kursorami wymaga poznania jeszcze kilku innych poleceń. Oto one:</p>

<pre class="line-numbers language-sql code-toolbar"><code class=" language-sql">OPEN &lt;cursor_name&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code><div class="toolbar"></div></pre>

<p>Powyższe polecenie "otwiera" kursor o nazwie <code class=" language-sql">&lt;cursor_name&gt;</code>. To znaczy, wykonuje jego zapytanie i uruchamia pewien rodzaj iteratora, ustawiając jego wskaźnik przed pierwszym pobranym rekordem.</p>

<pre class="line-numbers language-sql code-toolbar"><code class=" language-sql">FETCH &lt;cursor_name&gt; INTO &lt;variables_list&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code><div class="toolbar"></div></pre>

<p>Polecenie <code class=" language-sql">FETCH</code> pobiera kolejny rekord danych z kursora <code class=" language-sql">&lt;cursor_name&gt;</code> i wartości poszczególnych zwróconych pól zapamiętuje w liście zmiennych <code class=" language-sql">&lt;variables_list&gt;</code>. Wskaźnik iteratora przesuwany jest przed kolejny rekord.</p>

<a class="img-modal-group" href="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_23.png" style="width: 100%"><img src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_23.png" style="width: auto; max-width: 100%;"></a>

<p>oraz ostatnie polecenie:</p>

<pre class="line-numbers language-sql code-toolbar"><code class=" language-sql">CLOSE &lt;cursor_name&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code><div class="toolbar"></div></pre>


<p>Polecenie <code class=" language-sql">CLOSE</code> zamyka kursor o nazwie <code class=" language-sql">&lt;cursor_name&gt;</code>.</p>

<p>Do pracy z kursorami potrzebna jest jeszcze możliwość obsługi sytuacji, gdy nie ma już więcej danych do pobrania. W tym celu definiuje się tak zwany <code class=" language-sql">HANDLER</code> zdarzenia <code class=" language-sql">NOT FOUND</code>. Robi się to w następujący sposób:</p>

<pre class="line-numbers language-sql code-toolbar"><code class=" language-sql">DECLARE CONTINUE HANDLER FOR NOT FOUND SET finished=1;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code><div class="toolbar"></div></pre>

<p>Powyższy <code class=" language-sql">HANDLER</code> ustawia wartość zmiennej <code class=" language-sql">finished</code> na <strong>1</strong> w sytuacji, gdy w kursorze skończą się dane. Zmienną <code class=" language-sql">finished</code> należy wcześniej zadeklarować. Następnie należy jej użyć w pętli, aby sprawdzić czy należy zakończyć wykonywanie pętli.</p>

<p>Skoro już jesteśmy przy pętlach, musimy poznać składnię pętli w <strong>MySQL</strong>. <strong>MySQL</strong> oferuje kilka rodzajów pętli, między innymi: <code class=" language-sql">WHILE</code>, <code class=" language-sql">REPEAT</code> oraz <code class=" language-sql">LOOP</code> - nam przyda się pętla <code class=" language-sql">WHILE</code> o składni:</p>

<pre class="line-numbers language-sql code-toolbar"><code class=" language-sql">WHILE &lt;condition&gt; DO
&lt;instructions&gt;
END WHILE;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code><div class="toolbar"></div></pre>

<p>Pętla <code class=" language-sql">WHILE</code> przedstawiona powyżej wykonuje instrukcje określone jako <strong>instructions</strong> tak długo, jak długo spełniony jest warunek <strong>condition</strong>.</p>

<p>Skoro jesteśmy już uzbrojeni w wiedzę o pętlach i kursorach, spróbujmy napisać procedurę aktualizującą pole <code class=" language-sql">VIP_LEVEL</code> w tabeli <code class=" language-sql">READERS</code> w zależności od tego ile średnio miesięcznie książek wypożycza dany czytelnik:</p>

<a class="img-modal-group" href="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_24.png" style="width: 100%"><img src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_24.png" style="width: auto; max-width: 100%;"></a>

<p>Przeanalizujmy teraz kod powyższej procedury:</p>

<ul>
    <li>W linii nr 7 deklarujemy trzy zmienne typu <code class=" language-sql">INT</code>: <code class=" language-sql">BOOKSREAD</code> w której przechowujemy informację o ilości przeczytanych książek przez danego czytelnika, <code class=" language-sql">DAYS</code> w której przechowujemy informacje o tym od ilu dni czytelnik korzysta z naszej biblioteki oraz zmienną <code class=" language-sql">RDR_ID</code>, która przechowuje identyfikator aktualnie analizowanego czytelnika.</li>
    <li>W linii nr 8 deklarujemy zmienną przechowującą informację o średniej miesięcznej ilości wypożyczeń wykonanych przez danego czytelnika.</li>
    <li>W linii nr 9 deklarujemy zmienną sterującą pętli - dopóki jej wartość wynosi <code class=" language-sql">0</code>, pętla może być wykonywana, ponieważ nie osiągnięto jeszcze końca zbioru danych określonego przez kursor.</li>
    <li>Linia nr 10 stanowi "serce" naszej procedury - tutaj deklarujemy <strong>kursor</strong> o nazwie <code class=" language-sql">ALL_READERS</code>, który iteruje po wszystkich czytelnikach (czyli rekordach z tabeli <code class=" language-sql">READERS</code>). W ramach zapytania <strong>kursora</strong> pobieramy identyfikatory kolejnych czytelników (pole <code class=" language-sql">READERS_ID</code>).</li>
    <li>W linii nr 11 deklarujemy <code class=" language-sql">HANDLER</code> dla zdarzenia <code class=" language-sql">NOT FOUND</code> - ustawi on wartość zmiennej <code class=" language-sql">FINISHED</code> na wartość <code class=" language-sql">1</code> w sytuacji gdy dane w kursorze się skończą.</li>
    <li>Linia nr 12 otwiera <strong>kursor</strong> przed rozpoczęciem iterowania po czytelnikach w pętli.</li>
    <li>Linia nr 13 to początek pętli <code class=" language-sql">WHILE</code>, która będzie wykonywana tak długo, jak długo zmienna <code class=" language-sql">FINISHED</code> będzie miała wartość <code class=" language-sql">0</code>.</li>
    <li>W linii nr 14 pobieramy jeden rekord z <strong>kursora</strong>. Jako że <strong>kursor</strong> zwraca tylko wartość kolumny <code class=" language-sql">READER_ID</code> z tabeli <code class=" language-sql">READERS</code>, jego wartość zapamiętywana jest w jednej zmiennej o nazwie <code class=" language-sql">RDR_ID</code>. Wartości tej użyjemy za chwilę do pobrania informacji o ilości wypożyczeń, okresie korzystania z biblioteki, oraz do aktualizacji pola <code class=" language-sql">VIP_LEVEL</code> w tabeli <code class=" language-sql">READERS</code>.</li>
    <li>W linii nr 15 sprawdzamy czy przypadkiem nie wystąpiła sytuacja, w której osiągnęliśmy koniec zbioru danych zwracanych przez <strong>kursor</strong>. Musimy wykonać takie dodatkowe sprawdzenie wewnątrz pętli <code class=" language-sql">WHILE</code>, ponieważ warunek pętli będzie sprawdzony dopiero po wykonaniu wszystkich instrukcji zawartych w pętli. Musimy się więc zabezpieczyć przed sytuacją, w której <strong>kursor</strong> nie zwrócił już żadnych danych.</li>
    <li>W liniach od 16 do 18 przy pomocy zapytania <code class=" language-sql">SQL</code> wyciągamy z bazy danych informację o ilości książek wypożyczonych przez użytkownika o identyfikatorze zapisanym w zmiennej <code class=" language-sql">RDR_ID</code>.</li>
    <li>Linie od 19 do 21 wykonują zapytanie <code class=" language-sql">SQL</code> pobierające informację o tym, od jak wielu dni dany czytelnik (o podanym identyfikatorze <code class=" language-sql">RDR_ID</code>) korzysta z biblioteki. Zauważ, że do różnicy dat dodajemy <code class=" language-sql">1</code>, ponieważ wypożyczenie jednej (i jedynej) książki danego dnia oznacza, że przez jeden dzień czytelnik korzystał z biblioteki (a nie przez zero dni) - jest to poprawa błędu, który popełniliśmy wcześniej :) (Przykładowo, czytelnik zapisał się do biblioteki 1 stycznia 2010 roku i w tym dniu wypożyczył jedyną książkę - wówczas 20100101 - 20100101 = 0, więc otrzymalibyśmy błędną informację o tym, że czytelnik korzysta z biblioteki od 0 dni, co jest błędem, bo poprawną odpowiedzią jest: od 1 dnia).</li>
    <li>Linia nr 22 stanowi obliczenie średniej ilości książek wypożyczanych przez analizowanego użytkownika w skali miesiąca.</li>
    <li>Linie od 23 do 24 aktualizują informacje w polu <code class=" language-sql">VIP_LEVEL</code> w tabeli <code class=" language-sql">READERS</code>. Do tego celu wykorzystujemy napisaną wcześniej funkcję <code class=" language-sql">VipLevel(booksrented INT)</code>. Jako argument przekazujemy obliczoną wcześniej średnią ilość wypożyczeń w miesiącu dla danego czytelnika.</li>
    <li>Linia nr 25 to zatwierdzenie transakcji z wprowadzonymi zmianami. Robimy je we wnętrzu pętli dla każdego rekordu. Moglibyśmy również zrobić jeden zbiorczy <code class=" language-sql">COMMIT</code> poza pętlą, jednak z reguły staramy się zatwierdzać zmiany jak najczęściej (zmodyfikowane rekordy są zablokowane do edycji przez innych użytkowników do czasu zatwierdzenia zmian).</li>
    <li>Linia nr 27 to koniec pętli - jej wykonywanie przechodzi znowu do linii nr 13. Po zakończeniu pętli <strong>kursor</strong> jest zamykany w linii nr 28.</li>
</ul>


<p>Po skompilowaniu powyższej procedury, spróbuj ją wywołać, a następnie sprawdź zawartość tabeli <code class=" language-sql">READERS</code>:</p>

<a class="img-modal-group" href="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_25.png" style="width: 100%"><img src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_25.png" style="width: auto; max-width: 100%;"></a>

<p>Na powyższym zdjęciu widać, że pole <code class=" language-sql">VIP_LEVEL</code> zostało wypełnione. Procedurę <code class=" language-sql">UpdateVipLevel()</code> możemy wywoływać na kilka sposobów:</p>

<ul>
    <li>"na żądanie", poprzez jej wywołanie w <strong>MySQL Workbenchu</strong>,</li>
    <li> "na żądanie" z kodu aplikacji w Javie (to omówimy w kolejnym submodule) </li>
    <li>cyklicznie w określonych odstępach czasu (to również omówimy w kolejnych submodułach) </li>
    <li>w sytuacji wystąpienia określonych zdarzeń (i to również omówimy za chwilę).</li>
</ul>

<p>Jak widać z powyższego - część logiki aplikacji można przenieść do kodu realizowanego przez bazę danych. Takie rozwiązanie stosuje się często w sytuacji, gdy nasza aplikacja nie jest jedynym programem modyfikującym dane w bazie danych, a zależy nam na tym, aby inne programy robiły to w ten sam sposób.</p>
                        </div>
                    </div>
                                        <div class="card-block task-card">
                        <h3 id="302-kursory-i-zaawansowane-funkcje-i-procedury-zadanie-oznaczamy-bestsellery">Zadanie: <span class="task-title">Oznaczamy bestsellery</span></h3>
                        <div class="task-content">
                            <p>Celem zadania jest napisanie procedury identyfikującej bestsellery, czyli takiego typu książki, której egzemplarze są wypożyczane częściej niż dwa razy w miesiącu.</p>

<p>W tym celu:</p>
<ol>
    <li>Napisz skrypt, który do tabeli <code class=" language-sql">BOOKS</code> doda kolumnę <strong>BESTSELLER</strong> typu <strong>BOOLEAN</strong>. Kolumna ta będzie przyjmowała wartość <code class=" language-sql">true</code>, jeżeli książka jest wypożyczana częściej niż dwa razy w miesiącu</li>
    <li>Do skryptu dodaj procedurę <code class=" language-sql">UpdateBestsellers()</code>, która zaktualizuje kolumnę <strong>BESTSELLER</strong> przy każdej książce w tabeli <strong>BOOKS</strong> na podstawie danych zawartych w tabeli <strong>RENTS</strong>. Użyj w tym celu <strong>kursora</strong>.</li>
</ol>

<p>Link do skryptu <strong>SQL</strong> wklej poniżej i prześlij do mentora.</p>
                        </div>
                    </div>
                                        <div class="card-block submodule-footer clearfix ">
                                                <div class="clearfix">
                                                                                <a href="https://kodilla.com/pl/bootcamp-task/146/310996" target="_blank" class="btn btn-info-outline">Podgląd zadania</a>
                            <form target="_blank" class="form-inline project-link-form">
                                <div class="form-group">
                                    <input type="text" name="link" class="form-control" value="">
                                </div>
                                <button type="submit" class="btn  btn-success-outline ">Wyślij link <i class="fa fa-check"></i></button>
                            </form>
                                                                                                    </div>
                    </div>
                </section>
                                    
                <section id="submodule-458" class="card submodule " data-bootcamp-user-submodule-id="310997">
                <!-- klasy dla section: completed current comments -->
                    <div class="card-block submodule-header clearfix">
                        <i class="fa fa-check-circle-o fa-2x"></i>
                        <i class="fa fa-play-circle-o fa-2x"></i>
                        <i class="fa fa-exclamation-circle fa-2x"></i>
                        <i class="fa fa-send-o fa-2x"></i>
                        <h2 class="bootcamp-submodule-name">30.3. <span>Procedury i funkcje - informacje uzupełniające</span></h2>
                                            </div>
                    <div class="card-block">
                        <div class="submodule-content">
                            <p>Potrafisz już pisać funkcje i procedury składowane dla bazy <strong>MySQL</strong>. Warto poznać jeszcze kilka poleceń uzupełniających, a także nauczyć się jak można wywoływać procedury składowane z kodu programu w Javie.</p>

<h3 id="303-procedury-i-funkcje-informacje-uzupelniajace-analiza-stanu-procedur-skladowanych-w-bazie-danych">Analiza stanu procedur składowanych w bazie danych</h3>

<p>Aby sprawdzić jakie procedury i funkcje składowane są zdefiniowane w bazie danych <strong>MySQL</strong>, możesz skorzystać z <strong>MySQL Workbencha</strong>:</p>

<a class="img-modal-group" href="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_26.png" style="width: 100%"><img src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_26.png" style="width: auto; max-width: 100%;"></a>

<p>Przy poszczególnych procedurach widoczne są dwie ikony - ikona "klucza", która wyświetla kod źródłowy procedury oraz ikona "błyskawicy", która wykonuje procedurę.</p>

<p>Listę procedur możesz uzyskać również przy użyciu komend rozszerzonego <strong>SQL</strong>:</p>

<a class="img-modal-group" href="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_27.png" style="width: 100%"><img src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_27.png" style="width: auto; max-width: 100%;"></a>

<p>Analogiczną instrukcje możesz wykonać dla funkcji:</p>

<a class="img-modal-group" href="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_28.png" style="width: 100%"><img src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_28.png" style="width: auto; max-width: 100%;"></a>

<p>Dysponując już nazwami procedur oraz funkcji, możesz wyświetlić ich kod źródłowy przy pomocy polecenia:</p>

<a class="img-modal-group" href="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_29.png" style="width: 100%"><img src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_29.png" style="width: auto; max-width: 100%;"></a>

<p>Kliknij PPM ("Prawy Przycisk Myszy") na element zaznaczony strzałką na obrazku, a następnie wybierz funkcję "<i>Open Value in Viewer</i>", po czym przełącz podgląd binarny na podgląd tekstowy:</p>

<a class="img-modal-group" href="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_30.png" style="width: 100%"><img src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_30.png" style="width: auto; max-width: 100%;"></a>

<p>Analogicznie można podejrzeć kod źródłowy funkcji - przy pomocy polecenia <code class=" language-sql">SHOW CREATE FUNCTION &lt;function_name&gt;</code>.</p>

<h3 id="303-procedury-i-funkcje-informacje-uzupelniajace-wywolanie-procedury-skladowanej-z-kodu-w-javie">Wywołanie procedury składowanej z kodu w Javie</h3>

<p>Aby pokazać w jaki sposób można wywołać procedurę składowaną przy pomocy <strong>JDBC</strong>, użyjemy modułu <strong>kodilla-jdbc</strong> z projektu <strong>kodilla-course</strong>, na którym pracowaliśmy poprzednio:</p>

<a class="img-modal-group" href="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_31.png" style="width: 100%"><img src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_31.png" style="width: auto; max-width: 100%;"></a>

<p>Utwórz w katalogu <i>src/test/java</i>, w pakiecie <strong>com.kodilla.jdbc</strong>, nowy zestaw testów o nazwie <code class=" language-sql">StoredProcTestSuite</code>. Poniżej początkowy fragment testu:</p>

<a class="img-modal-group" href="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_32.png" style="width: 100%"><img src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_32.png" style="width: auto; max-width: 100%;"></a>

<p>Zwróć uwagę na to, że do wykonania zapytania modyfikującego dane nie użyliśmy (jak poprzednio w module o <strong>JDBC</strong>) polecenia <code class=" language-java"><span class="token function">executeQuery</span><span class="token punctuation">(</span>String query<span class="token punctuation">)</span></code>. Tym razem skorzystaliśmy z polecenia <code class=" language-java"><span class="token function">executeUpdate</span><span class="token punctuation">(</span>String query<span class="token punctuation">)</span></code>. Operacje modyfikujące dane należy wykonywać właśnie w ten sposób.</p>

<p>To oczywiście nie jest jeszcze cały test - po pierwsze, jeszcze nic nie testuje :) Przygotowuje nam za to dane testowe. Ich przygotowanie polega na wypełnieniu kolumny <code class=" language-sql">VIP_LEVEL</code> wartością <strong>"Not set"</strong> dla wszystkich czytelników. Możesz ten test uruchomić w takiej postaci i sprawdzić w bazie danych czy działa:</p>

<a class="img-modal-group" href="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_33.png" style="width: 100%"><img src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_33.png" style="width: auto; max-width: 100%;"></a>

<p>Na powyższym zdjęciu widać, że wartości kolumny <code class=" language-sql">VIP_LEVEL</code> zostały właściwie wypełnione. Taki chcemy mieć stan początkowy bazy danych, aby móc później sprawdzić czy procedura <code class=" language-java"><span class="token function">UpdateVipLevels</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code> została poprawnie wykonana.</p>

<p>Dopisz teraz dalszą część testu:</p>

<a class="img-modal-group" href="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_34.png" style="width: 100%"><img src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_34.png" style="width: auto; max-width: 100%;"></a>

<p>Tym razem, zamiast poleceń <code class=" language-java"><span class="token function">executeQuery</span><span class="token punctuation">(</span>String query<span class="token punctuation">)</span></code> oraz <code class=" language-java"><span class="token function">executeUpdate</span><span class="token punctuation">(</span>String query<span class="token punctuation">)</span></code> skorzystaliśmy z metody <code class=" language-java"><span class="token function">execute</span><span class="token punctuation">(</span>String query<span class="token punctuation">)</span></code>. Tej metody należy używać podczas wykonywania procedur składowanych.</p>

<p>Nasz test nadal nie jest skończony, ponieważ wciąż nic nie testuje. Możemy się jednak upewnić, czy jesteśmy "na właściwej ścieżce" - uruchom test w postaci jak powyżej pokazano, a następnie sprawdź w <strong>MySQL Workbenchu</strong> zawartość tabeli <code class=" language-sql">READERS</code>:</p>

<a class="img-modal-group" href="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_35.png" style="width: 100%"><img src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_35.png" style="width: auto; max-width: 100%;"></a>

<p>Na powyższym zdjęciu widać, że zawartość kolumny <code class=" language-sql">VIP_LEVEL</code> została wypełniona, więc procedura składowana <code class=" language-java"><span class="token function">UpdateVipLevels</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code> wykonała się poprawnie. Pozostało już tylko dopisać sekcję <code class=" language-java">Then</code> naszego testu:</p>

<a class="img-modal-group" href="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_36.png" style="width: 100%"><img src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_36.png" style="width: auto; max-width: 100%;"></a>

<p>W sekcji <code class=" language-java">Then</code> pobieramy z bazy danych informację o ilości rekordów w tabeli <code class=" language-sql">READERS</code>, które mają kolumnę <code class=" language-sql">VIP_LEVEL</code> ustawioną na wartość <strong>"Not set"</strong>. Jedyną poprawną wartością będzie zero, ponieważ procedura składowana <code class=" language-java"><span class="token function">UpdateVipLevels</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code> powinna zaktualizować tę kolumnę we wszystkich rekordach tabeli. Tak też jest skonstruowana nasza asercja. Uruchom test:</p>

<a class="img-modal-group" href="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_37.png" style="width: 100%"><img src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_37.png" style="width: auto; max-width: 100%;"></a>

<p>Test wykonał się poprawnie. Możemy więc powiedzieć, że potrafimy już wywoływać procedury składowane z poziomu języka Java!</p>

<p>Możesz w tym miejscu zapytać - a co z <strong>Hibernate</strong>? W <strong>Hibernate</strong> jest to również możliwe, musisz zastosować jedynie <strong>Native Named Query</strong>, które poznaliśmy w module omawiającym Hibernate.</p>
                        </div>
                    </div>
                                        <div class="card-block task-card">
                        <h3 id="303-procedury-i-funkcje-informacje-uzupelniajace-zadanie-wywolanie-procedury-updatebestsellers-z-poziomu-javy">Zadanie: <span class="task-title">Wywołanie procedury UpdateBestsellers z poziomu Javy</span></h3>
                        <div class="task-content">
                            <p>Twoim zadaniem jest przygotowanie nowego testu. W katalogu <i>src/test/java</i>, w pakiecie <strong>com.kodilla.jdbc</strong>, w klasie <code class=" language-java">StoredProcTestSuite</code> przygotuj nowy test o nazwie <code class=" language-java">testUpdateBestsellers</code>.</p>
<p>W teście sprawdź działanie procedury składowanej <code class=" language-java"><span class="token function">UpdateBestsellers</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code>.</p>

<p>Kod zadania prześlij do repozytorium <strong>GitHub</strong>. Link do repozytorium wklej poniżej i prześlij do mentora.</p>
                        </div>
                    </div>
                                        <div class="card-block submodule-footer clearfix ">
                                                <div class="clearfix">
                                                                                <a href="https://kodilla.com/pl/bootcamp-task/146/310997" target="_blank" class="btn btn-info-outline">Podgląd zadania</a>
                            <form target="_blank" class="form-inline project-link-form">
                                <div class="form-group">
                                    <input type="text" name="link" class="form-control" value="">
                                </div>
                                <button type="submit" class="btn  btn-success-outline ">Wyślij link <i class="fa fa-check"></i></button>
                            </form>
                                                                                                    </div>
                    </div>
                </section>
                                    
                <section id="submodule-459" class="card submodule " data-bootcamp-user-submodule-id="310998">
                <!-- klasy dla section: completed current comments -->
                    <div class="card-block submodule-header clearfix">
                        <i class="fa fa-check-circle-o fa-2x"></i>
                        <i class="fa fa-play-circle-o fa-2x"></i>
                        <i class="fa fa-exclamation-circle fa-2x"></i>
                        <i class="fa fa-send-o fa-2x"></i>
                        <h2 class="bootcamp-submodule-name">30.4. <span>Wyzwalacze</span></h2>
                                            </div>
                    <div class="card-block">
                        <div class="submodule-content">
                            <p>Wyzwalacze (<i>ang. triggers</i>) są fragmentami kodu (procedurami), które wykonywane są wskutek wystąpienia pewnych zdarzeń.</p>

<p>Ogólnie typy wyzwalaczy możemy podzielić na:</p>

<ul>
    <li><code class=" language-sql">AFTER</code> - wykonywane są po wystąpieniu danego zdarzenia</li>
    <li><code class=" language-sql">BEFORE</code> - wykonywane są przed wystąpieniem danego zdarzenia</li>
</ul>

<p>Zdarzeniami, na które mogą reagować wyzwalacze, są:</p>

<ul>
    <li><code class=" language-sql">INSERT</code> - wstawienie rekordu do tabeli</li>
    <li><code class=" language-sql">UPDATE</code> - aktualizacja rekordu w tabeli</li>
    <li><code class=" language-sql">DELETE</code> - usunięcie rekordu z tabeli</li>
</ul>

<p>Ogólna (uproszczona) składnia polecenia tworzącego wyzwalacz jest następująca:</p>

<pre class="line-numbers language-sql code-toolbar"><code class=" language-sql">CREATE TRIGGER &lt;trigger_name&gt; &lt;type&gt; &lt;event&gt; ON &lt;table&gt;
FOR EACH ROW
BEGIN
   &lt;instructions&gt;
END<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code><div class="toolbar"></div></pre>

<p>gdzie:</p>

<ul>
    <li><strong>trigger_name</strong> - nazwa wyzwalacza</li>
    <li><strong>type</strong> - typ wyzwalacza (<strong>BEFORE</strong> lub <strong>AFTER</strong>)</li>
    <li><strong>event</strong> - zdarzenie aktywujące wyzwalacz (<strong>INSERT, UPDATE</strong> lub <strong>DELETE</strong>)</li>
    <li><strong>table</strong> - nazwa tabeli, na której zakładany jest wyzwalacz</li>
    <li><strong>instructions</strong> - instrukcje, które są wykonywane, gdy wystąpi zdarzenie (ciało wyzwalacza)</li>
</ul>


<h3 id="304-wyzwalacze-prosty-wyzwalacz">Prosty wyzwalacz</h3>

<p>Przykład prostego wyzwalacza pokazano poniżej:</p>

<a class="img-modal-group" href="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_38.png" style="width: 100%"><img src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_38.png" style="width: auto; max-width: 100%;"></a>

<p>Powyższy kod działa następująco:</p>

<ul>
    <li>W linii nr 1 tworzymy nową zmienną globalną (znak <code class=" language-sql">@</code> przed nazwą zmiennej) o nazwie <code class=" language-sql">RENTSQTY</code> i inicjujemy ją na zero (jeżeli zmienna nie została wcześniej zadeklarowana, to pierwsze przypisanie wartości do tej zmiennej automatycznie ją deklaruje)</li>
    <li>W linii nr 5 tworzy <strong>wyzwalacz</strong> o nazwie <code class=" language-sql">RENTSCOUNTER</code>, który będzie założony na tabeli <code class=" language-sql">RENTS</code> i będzie wykonywany przed każdym wstawieniem rekordu (<code class=" language-sql">BEFORE INSERT</code>)</li>
    <li>W linii nr 8 znajduje się właściwe ciało wyzwalacza. Zwiększa ono wartość zmiennej globalnej <code class=" language-sql">@RENTSQTY</code> o jeden.</li>
</ul>

<p>Sprawdź jaka jest aktualna wartość zmiennej <code class=" language-sql">@RENTSQTY</code>:</p>

<a class="img-modal-group" href="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_39.png" style="width: 100%"><img src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_39.png" style="width: auto; max-width: 100%;"></a>

<p>Wartość ta obecnie wynosi zero.</p>

<p>Dodaj teraz przykładowe rekordy do tabeli wypożyczeń:</p>

<a class="img-modal-group" href="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_40.png" style="width: 100%"><img src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_40.png" style="width: auto; max-width: 100%;"></a>

<p>A następnie ponownie sprawdź wartość zmiennej <code class=" language-sql">@RENTSQTY</code>:</p>

<a class="img-modal-group" href="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_41.png" style="width: 100%"><img src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_41.png" style="width: auto; max-width: 100%;"></a>

<p>Zmienna posiada wartość równą cztery. Oznacza to, że nasz <strong>wyzwalacz</strong> wykonał się cztery razy (przy okazji każdego wstawiania rekordu).</p>

<p>Możesz sprawdzić w nawigatorze bazy danych w <strong>MySQL Workbenchu</strong>, że utworzony przez Ciebie <strong>wyzwalacz</strong> widoczny jest w sekcji <strong>triggers</strong> tabeli <code class=" language-sql">RENTS</code>:</p>

<a class="img-modal-group" href="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_42.png" style="width: 100%"><img src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_42.png" style="width: auto; max-width: 100%;"></a>

<p>Na zakończenie usuniemy utworzony "ćwiczeniowy" <strong>wyzwalacz</strong>, ponieważ nie będzie już nam później potrzebny:</p>

<a class="img-modal-group" href="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_43.png" style="width: 100%"><img src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_43.png" style="width: auto; max-width: 100%;"></a>

<h3 id="304-wyzwalacze-zaawansowane-wyzwalacze-i-tabele-audytowe">Zaawansowane wyzwalacze i tabele audytowe</h3>

<p>Często podczas pracy z rzeczywistymi systemami działającymi produkcyjnie zachodzi potrzeba posiadania dokładnych informacji audytowych odnośnie zmian jakie zachodziły w tabelach.</p>

<p>Co to są informacje audytowe? Informacje o wszystkich operacjach, które były wykonywane na tabeli - wstawianie, modyfikowanie i usuwanie rekordów, wraz z informacją o dacie i godzinie wykonania czynności.</p>

<p>Tego typu informacje są ważne ze względu na rozliczalność operacji na bazie danych (możliwość sprawdzenia kto, co i kiedy zmienił), pomagają również w wyjaśnieniu stanu danych oraz przyczyn błędów.</p>

<p>Informacje audytowe gromadzone są zazwyczaj albo w logach aplikacji albo w tak zwanych tabelach audytowych (zwanych też czasem tabelami-cieniami).</p>

<p>Stworzymy teraz taką tabelę audytową dla tabeli <code class=" language-sql">RENTS</code>.</p>

<p>Utwórz więc nową tabelę:</p>

<a class="img-modal-group" href="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_44.png" style="width: 100%"><img src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_44.png" style="width: auto; max-width: 100%;"></a>

<p>Poszczególne kolumny tej tabeli będą miały następujące zastosowanie:</p>

<ul>
    <li><code class=" language-sql">EVENT_ID</code> - klucz główny tabeli, nadawany automatycznie</li>
    <li><code class=" language-sql">EVENT_DATE</code> - znacznik daty i czasu dokonania zmiany w tabeli <code class=" language-sql">RENTS</code></li>
    <li><code class=" language-sql">EVENT_TYPE</code> - rodzaj zdarzenia; możliwe wartości to: <code class=" language-sql">INSERT</code>, <code class=" language-sql">UPDATE</code>, <code class=" language-sql">DELETE</code></li>
    <li><code class=" language-sql">RENT_ID</code> - identyfikator wypożyczenia, którego dotyczy zapis w tabeli audytowej</li>
    <li><code class=" language-sql">OLD_*</code> - seria pól przeznaczonych do przechowywania informacji o zawartości tabeli przed zmianą</li>
    <li><code class=" language-sql">NEW_*</code> - seria pól przeznaczonych do przechowywania informacji o zawartości tabeli po zmianie</li>
</ul>

<p>Napiszemy teraz zestaw <strong>wyzwalaczy</strong>, które będą w automatyczny sposób uzupełniały informacje audytowe o zmianach w tabeli <code class=" language-java">RENTS</code>. Takie rozwiązanie ma tę zaletę, że logowane będą wszystkie modyfikacje bazy danych - bez względu na to, czy powstały w naszej aplikacji Javowej czy też kiedy jakiś admin za naszymi plecami wprowadził je z poziomu np. <strong>MySQL Workbench</strong>. <strong>Wyzwalacze</strong> będą wykonywały się zawsze - no, chyba że jakiś sprytny hacker, chcący popsuć naszą aplikację i ukryć swoje działania, je wyłączy ;)</p>

<h4>Wyzwalacze zapisujące dane w tabeli audytowej</h4>

<p>Chcemy logować trzy zdarzenia:</p>

<ul>
    <li>wstawianie rekordów do tabeli (<code class=" language-sql">INSERT INTO …</code>)</li>
    <li>usuwanie rekordów z tabeli (<code class=" language-sql">DELETE FROM …</code>)</li>
    <li>modyfikowanie rekordów w tabeli (<code class=" language-sql">UPDATE …</code>)</li>
</ul>

<p>Rozpoczniemy od logowania zdarzenia związanego z wstawianiem danych do tabeli <code class=" language-sql">RENTS</code>. Nasz <strong>wyzwalacz</strong> będzie wyglądał następująco:</p>

<a class="img-modal-group" href="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_45.png" style="width: 100%"><img src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_45.png" style="width: auto; max-width: 100%;"></a>

<p>Przeanalizujmy jego działanie:</p>

<ul>
    <li>W linii nr 3 tworzymy nowy <strong>wyzwalacz</strong> typu <code class=" language-sql">AFTER INSERT</code> na tabeli <code class=" language-sql">RENTS</code>. Będzie się on więc wykonywał po każdym wstawieniu nowego rekordu do tabeli <code class=" language-sql">RENTS</code>.</li>
    <li>W liniach od 6 do 9 wstawiamy do tabeli audytowej nowy rekord - to jest nasz "log". Jako datę wystąpienia zdarzenia wstawiamy wynik wywołania funkcji <code class=" language-sql">CURTIME()</code> - jest to funkcja zwracająca aktualną datę systemową wraz z czasem. Jako typ zdarzenia wstawiamy ciąg znaków <code>"INSERT"</code>. Do pól <code class=" language-sql">NEW_*</code> wstawiamy wartości, których użyto do wypełnienia nowego rekordu. Nowy (wstawiany) rekord jest reprezentowany wewnątrz <strong>wyzwalacza</strong> przez zmienną o nazwie <code class=" language-sql">NEW</code>. Wykorzystujemy jego wartości pól do wypełnienia pól w tabeli audytowej.</li>
</ul>


<div class="bc-note alert-info">
    <h4 class="alert-heading text-center">Zmienne NEW oraz OLD w wyzwalaczach</h4>
    <p>W wyzwalaczach możemy używać zmiennych <code class=" language-sql">NEW</code> oraz <code class=" language-sql">OLD</code> reprezentujących rekord po zmianach oraz rekord przed zmianami. Możemy użyć odpowiednio:</p>
    
        <ul>
            <li>W wyzwalaczach dla <code class=" language-sql">INSERT</code> - mamy dostęp do zmiennej <code class=" language-sql">NEW</code> (brak zmiennej <code class=" language-sql">OLD</code>)</li>
            <li>W wyzwalaczach dla <code class=" language-sql">DELETE</code> - mamy dostęp do zmiennej <code class=" language-sql">OLD</code> (brak zmiennej <code class=" language-sql">NEW</code>)</li>
            <li>W wyzwalaczach <code class=" language-sql">UPDATE</code> - mamy dostęp zarówno do zmiennej <code class=" language-sql">NEW</code>, jak i do zmiennej <code class=" language-sql">OLD</code>.</li>
        </ul>
            
        <p>Więcej informacji na ten temat znajdziesz <a href="https://dev.mysql.com/doc/refman/5.7/en/trigger-syntax.html" target="_blank">tutaj</a>.</p>
</div>



<p>Wykonaj teraz przykładową operację wstawienia rekordu do tabeli <code class=" language-sql">RENTS</code>:</p>

<a class="img-modal-group" href="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_46.png" style="width: 100%"><img src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_46.png" style="width: auto; max-width: 100%;"></a>

<p>A następnie sprawdźmy zawartość tabeli audytowej - powinny być w niej widoczne informacje o dodaniu nowego rekordu do tabeli <code class=" language-sql">RENTS</code>:</p>

<a class="img-modal-group" href="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_47.png" style="width: 100%"><img src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_47.png" style="width: auto; max-width: 100%;"></a>

<p>Widać więc, że do tabeli audytowej została zalogowana informacja o wstawieniu nowego rekordu do tabeli <code class=" language-sql">RENTS</code>.</p>

<p>Przygotujmy teraz <strong>wyzwalacz</strong> logujący informacje o operacjach usunięcia rekordów z tabeli <code class=" language-sql">RENTS</code>:</p>

<a class="img-modal-group" href="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_48.png" style="width: 100%"><img src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_48.png" style="width: auto; max-width: 100%;"></a>

<p>Jak działa powyższy <strong>wyzwalacz</strong>? Poniżej krótka analiza:</p>

<ul>
    <li>W linii nr 3 definiujemy <strong>wyzwalacz</strong> o nazwie <code class=" language-sql">RENTS_DELETE</code> na tabeli <code class=" language-sql">RENTS</code>, który jest uruchamiany po każdym usunięciu rekordu (<code class=" language-sql">AFTER DELETE</code>).</li>
    <li>W liniach od 6 do 7 wstawiamy do tabeli audytowej nowy rekord zawierający informacje o czasie zdarzenia, rodzaju zdarzenia (operacja <code class=" language-sql">"DELETE"</code>), a także identyfikator usuwanego rekordu. Aby uzyskać identyfikator usuwanego rekorduu odwołujemy się do kolumny <code class=" language-sql">RENT_ID</code> zmiennej o nazwie <code class=" language-sql">OLD</code>. Zmienna ta reprezentuje rekord przed modyfikacją (czyli usunięciem).</li>
</ul>

<p>Wykonaj teraz przykładową operację usunięcia danych z tabeli <code class=" language-sql">RENTS</code>. Pamiętaj, aby podać właściwy identyfikator rekordu (ostatni w Twojej tabeli <code class=" language-sql">RENTS</code>):</p>

<a class="img-modal-group" href="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_49.png" style="width: 100%"><img src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_49.png" style="width: auto; max-width: 100%;"></a>

<p>Sprawdźmy teraz co zalogowało się w tabeli audytowej:</p>

<a class="img-modal-group" href="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_50.png" style="width: 100%"><img src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_50.png" style="width: auto; max-width: 100%;"></a>

<p>Widzimy, że pojawił się nowy rekord audytowy. W kolumnie <code class=" language-sql">EVENT_TYPE</code> znajduje się informacja <code class=" language-sql">"DELETE"</code>, a w kolumnie <code class=" language-sql">RENT_ID</code> możesz zaobserwować identyfikator usuniętego rekordu.</p>

<p>Przyszła więc pora na ostatni (i najtrudniejszy) <strong>wyzwalacz</strong> - po operacji aktualizacji danych:</p>

<a class="img-modal-group" href="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_51.png" style="width: 100%"><img src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_51.png" style="width: auto; max-width: 100%;"></a>

<p>Kod tego <strong>wyzwalacza</strong> oparty jest o fakt, że we wnętrzu <strong>wyzwalacza</strong> typu <code class=" language-sql">AFTER UPDATE</code> (jak też i <code class=" language-sql">BEFORE UPDATE</code>) mamy do dyspozycji dwie zmienne tworzone automatycznie przez bazę danych:</p>

<ul>
    <li>zmienną <code class=" language-sql">NEW</code> reprezentującą modyfikowany rekord bazy danych w kształcie po dokonaniu zmian (po wykonaniu instrukcji <strong>SQL</strong>: <code class=" language-sql">UPDATE …</code>)</li>
    <li>zmienną <code class=" language-sql">OLD</code>, która zawiera rekord bazy danych w kształcie sprzed modyfikacji instrukcją <code class=" language-java">UPDATE …</code></li>
</ul>

<p>Wykorzystując powyższe wpisujemy do pól <code class=" language-sql">NEW_*</code> tabeli <code class=" language-sql">RENTS_AUD</code> nowe wartości (czyli wartości pobrane z obiektu <code class=" language-sql">NEW</code>), a do pól <code class=" language-sql">OLD_*</code> wpisujemy wartości sprzed aktualizacji (czyli pobrane z obiektu <code class=" language-sql">OLD</code>).</p>

<p>Pole <code class=" language-sql">RENT_ID</code> możemy pobrać zarówno z obiektu <code class=" language-sql">NEW</code>, jak i z obiektu <code class=" language-sql">OLD</code>, ponieważ odpowiada ono kluczowi głównemu z tabeli <code class=" language-sql">RENTS</code>, który nigdy się nie zmienia.</p>

<p>Wykonaj teraz przykładową modyfikację danych w tabeli <code class=" language-sql">RENTS</code> (zwróć uwagę, czy masz u siebie rekord o <code class=" language-sql">RENT_ID</code> = 20 - powinien być obecny, jeżeli jednak z jakichś przyczyn go nie masz - zastąp identyfikator 20 dowolnym innym identyfikatorem jednego z rekordów, które dodałeś w poprzednich eksperymentach):</p>

<a class="img-modal-group" href="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_52.png" style="width: 100%"><img src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_52.png" style="width: auto; max-width: 100%;"></a>

<p>Wykonanie powyższej operacji powinno zaskutkować zapisaniem do tabeli audytowej informacji o tym, że rekord tabeli <code class=" language-sql">RENTS</code> był modyfikowany. Sprawdźmy to:</p>

<a class="img-modal-group" href="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_53.png" style="width: 100%"><img src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_53.png" style="width: auto; max-width: 100%;"></a>

<p>Widać na powyższym zdjęciu, że w tabeli <code class=" language-sql">RENTS_AUD</code> pojawił się wpis dotyczący aktualizacji rekordu o kluczu <code class=" language-sql">RENT_ID</code> równym 20. Przewiń okno podglądu trochę w prawo, aby sprawdzić czy widoczna jest nasza konkretna zmiana (ustawienie pola <code class=" language-sql">RETURN_DATE</code>):</p>

<a class="img-modal-group" href="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_54.png" style="width: 100%"><img src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_54.png" style="width: auto; max-width: 100%;"></a>

<p>Na powyższym zdjęciu widać, że wartość w kolumnie <code class=" language-sql">OLD_RETURN_DATE</code> wynosi <code class=" language-sql">NULL</code>, natomiast wartość w kolumnie <code class=" language-sql">NEW_RETURN_DATE</code> zawiera już konkretną datę, którą przed chwilą ustawiliśmy przy pomocy instrukcji <code class=" language-sql">UPDATE RENTS …</code></p>

<p>Przedstawione w tym submodule rozwiązania bardzo często stosowane są w oprogramowaniu tworzonym w rzeczywistych warunkach. Informacje audytowe są cennym źródłem wiedzy podczas wyjaśniania "co się stało z rekordem x…", a z takimi pytaniami będą się do Ciebie zwracali z pewnością użytkownicy Twojego oprogramowania w sytuacji, gdy nie będą wiedzieli dlaczego jakiś rekord zmienił się w ich danych.</p>


                        </div>
                    </div>
                                        <div class="card-block task-card">
                        <h3 id="304-wyzwalacze-zadanie-audytujemy-ksiazki-oraz-czytelnikow">Zadanie: <span class="task-title">Audytujemy książki oraz czytelników</span></h3>
                        <div class="task-content">
                            <p>Twoim zadaniem jest rozszerzenie poznanego przed chwilą mechanizmu na dwie kolejne tabele - tabelę <code class=" language-sql">READERS</code> oraz tabelę <code class=" language-sql">BOOKS</code>.</p>

<p>Napisz skrypt, który:</p>
<ul>
    <li>Tworzy tabelę audytową <code class=" language-sql">BOOKS_AUD</code></li>
    <li>Tworzy tabelę audytową <code class=" language-sql">READERS_AUD</code></li>
    <li>Tworzy komplet <strong>wyzwalaczy</strong> (<code class=" language-sql">AFTER INSERT, AFTER DELETE</code> oraz <code class=" language-sql">AFTER UPDATE</code>) na tabelach <code class=" language-sql">BOOKS</code> oraz <code class=" language-sql">READERS</code>, dokonujących zapisów audytowych.</li>
</ul>

<p>Link do skryptu <strong>SQL</strong> wstaw poniżej i prześlij do mentora.</p>
                        </div>
                    </div>
                                        <div class="card-block submodule-footer clearfix ">
                                                <div class="clearfix">
                                                                                <a href="https://kodilla.com/pl/bootcamp-task/146/310998" target="_blank" class="btn btn-info-outline">Podgląd zadania</a>
                            <form target="_blank" class="form-inline project-link-form">
                                <div class="form-group">
                                    <input type="text" name="link" class="form-control" value="">
                                </div>
                                <button type="submit" class="btn  btn-success-outline ">Wyślij link <i class="fa fa-check"></i></button>
                            </form>
                                                                                                    </div>
                    </div>
                </section>
                                    
                <section id="submodule-460" class="card submodule " data-bootcamp-user-submodule-id="310999">
                <!-- klasy dla section: completed current comments -->
                    <div class="card-block submodule-header clearfix">
                        <i class="fa fa-check-circle-o fa-2x"></i>
                        <i class="fa fa-play-circle-o fa-2x"></i>
                        <i class="fa fa-exclamation-circle fa-2x"></i>
                        <i class="fa fa-send-o fa-2x"></i>
                        <h2 class="bootcamp-submodule-name">30.5. <span>Widoki i zdarzenia</span></h2>
                                            </div>
                    <div class="card-block">
                        <div class="submodule-content">
                            <p>W niniejszym submodule poznasz dalsze przydatne funkcjonalności bazy danych. Pokazujemy je na przykładzie bazy <strong>MySQL</strong> lecz takie (lub bardzo podobne) funkcjonalności występują w większości popularnych baz danych.</p>

<h3 id="305-widoki-i-zdarzenia-widoki">Widoki</h3>

<p>Jeżeli Twój program często korzysta z jakiegoś zapytania, warto rozważyć stworzenie tak zwanego <strong>widoku</strong> (<i>ang. view</i>). Spójrz na poniższe zapytanie zwracające informacje szczegółowe o wypożyczeniach czytelników ułożone w kolejności chronologicznej:</p>

<a class="img-modal-group" href="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/kodilla-bootcamp-28-06-2018-1530175077-8385.png" style="width: 100%"><img src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/kodilla-bootcamp-28-06-2018-1530175077-8385.png" style="width: auto; max-width: 100%;"></a>

<p>Powyższe zapytanie dokonuje złączenia danych pochodzących z tabel <code class=" language-sql">READERS</code>, <code class=" language-sql">BOOKS</code> oraz <code class=" language-sql">RENTS</code>.</p>

<div class="bc-note alert-success">
    <h4 class="alert-heading text-center">Przypomnienie - złączenia tabel</h4>
    <p>Aby złączyć dane z dwóch tabel, możemy użyć warunku w sekcji <code class=" language-sql">WHERE</code> zapytania <strong>SQL</strong>, na przykład:</p>

    <pre class="line-numbers language-sql code-toolbar"><code class=" language-sql">SELECT POSTS.TEXT, COMMENTS.TEXT
FROM POSTS, COMMENTS
WHERE COMMENTS.POST_ID = POSTS.ID<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code><div class="toolbar"></div></pre>

    <p>gdzie kolumna <code class=" language-sql">POST_ID</code> w tabeli <code class=" language-sql">COMMENTS</code> jest kluczem obcym do tabeli <code class=" language-sql">POSTS</code>.</p>
</div>



<p>Załóżmy, że bardzo często korzystasz z takiego zapytania podczas pracy ze swoją aplikacją. Istnieje prosty sposób, aby "utrwalić" w pewien sposób to zapytanie w swojej bazie danych. Można utworzyć z niego <strong>widok</strong>. Widok jest bytem podobnym do funkcji, jednak w odróżnieniu od funkcji - na widoku można wykonywać zapytania <strong>SQL</strong>, jak na zwykłej tabeli :)</p>

<p>Ogólna (uproszczona) składnia dla tworzenia widoku jest następująca:</p>

<pre class="line-numbers language-sql code-toolbar"><code class=" language-sql">CREATE VIEW &lt;view_name&gt; [&lt;columns&gt;] AS &lt;select_expression&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code><div class="toolbar"></div></pre>

<p>gdzie <code class=" language-sql">view_name</code> jest nazwą <strong>widoku</strong>, <code class=" language-sql">columns</code> jest opcjonalnym parametrem umożliwiającym ustawienie nazw kolumn widoku inne niż wynikające z zapytania <strong>SQL</strong>, natomiast <code class=" language-sql">select_expression</code> jest zapytaniem, którego wynik chcemy prezentować w postaci <strong>widoku</strong>.</p>

<p>Tworząc <strong>widok</strong>, tworzysz coś w rodzaju "sztucznej tabeli" (zawierającej wyniki zapytania), na której możesz wykonywać normalne operacje, np. wyszukiwanie danych za pomocą <code class=" language-sql">SELECT</code>.</p>

<p>Utwórz teraz widok:</p>

<a class="img-modal-group" href="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/kodilla-bootcamp-28-06-2018-1530175139-9158.png" style="width: 100%"><img src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/kodilla-bootcamp-28-06-2018-1530175139-9158.png" style="width: auto; max-width: 100%;"></a>

<p>W nawigatorze po lewej stronie <strong>MySQL Workbencha</strong> w gałęzi <code class=" language-sql">Views</code> możesz zauważyć, że pojawił się utworzony przez Ciebie widok (musisz odświeżyć zawartość nawigatora aby zmiany były widoczne):</p>

<a class="img-modal-group" href="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_57.png" style="width: 100%"><img src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_57.png" style="width: auto; max-width: 100%;"></a>

<p>A teraz punkt kulminacyjny, czyli skorzystanie z widoku:</p>

<a class="img-modal-group" href="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_58.png" style="width: 100%"><img src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_58.png" style="width: auto; max-width: 100%;"></a>

<p>Jak widzisz - z widoku możemy korzystać jak ze zwykłej tabeli. Wygodne, prawda? :)</p>

<p>Możemy oczywiście filtrować wyniki - na przykład wyświetlić informacje o wypożyczeniach jedynie z ostatnich pięciu dni:</p>

<a class="img-modal-group" href="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_59.png" style="width: 100%"><img src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_59.png" style="width: auto; max-width: 100%;"></a>

<p>Wyniki możemy również dowolnie sortować:</p>

<a class="img-modal-group" href="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_60.png" style="width: 100%"><img src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_60.png" style="width: auto; max-width: 100%;"></a>

<p>Krótko mówiąc - sztuczna tabela.</p>




<p>W niektórych sytuacjach do takiej "tabeli" (czyli do <strong>widoku</strong>) można nawet dodawać i modyfikować rekordy. Dotyczy to jednak jedynie prostych widoków z relacjami 1 : 1 (jeden do jednego).</p>

<h3 id="305-widoki-i-zdarzenia-integracyjne-zastosowanie-widokow">Integracyjne zastosowanie widoków</h3>

<p>Widoki bardzo często wykorzystuje się do integrowania ze sobą różnych aplikacji na poziomie bazy danych. Co to oznacza? Wyobraź sobie, że do naszej biblioteki zakupiono zewnętrzny system <strong>CRM</strong> (<i>ang. customer relationship management</i>), który dla najbardziej lojalnych czytelników wysyła vouchery na darmowe książki, które czytelnik może otrzymać "na zawsze" jako nagrodę za dużą ilość wypożyczeń.</p>

<p>System <strong>CRM</strong> musi w jakiś sposób uzyskiwać listę najaktywniejszych czytelników. Może on podłączyć się do bazy i wykonywać zapytania <strong>SQL</strong>. Mógłby oczywiście odczytywać bezpośrednio z tabel <code class=" language-sql">BOOKS</code>, <code class=" language-sql">READERS</code> oraz <code class=" language-sql">RENTS</code>, jednak takie rozwiązanie ma pewne wady. W sytuacji gdy chcielibyśmy rozbudować nasze oprogramowanie w bibliotece, i skutkowałoby to modyfikacją struktur tabel, mogłoby się okazać, że system <strong>CRM</strong> przestanie nagle działać (bo na przykład korzystał z kolumny tabeli, której zmieniliśmy nazwę). Taka sytuacja wymagałaby dostosowania systemu <strong>CRM</strong> do zmian w systemie biblioteki. Jeżeli system <strong>CRM </strong>jest systemem zakupionym od zewnętrznego dostawcy, to najprawdopodobniej zażąda on od nas zapłaty za wprowadzenie modyfikacji do swojego systemu. Czy można się przed tym jakoś uchronić?</p>

<p>Oczywiście - wystarczy system <strong>CRM</strong> zintegrować poprzez <strong>widoki</strong>. Jeżeli system <strong>CRM</strong> będzie odczytywał dane z <strong>widoku</strong>, a nie bezpośrednio z tabel bazy danych, to w sytuacji gdy musimy te tabele zmodyfikować, wystarczy również zaktualizować <strong>widok</strong> tak, aby sięgał do zmodyfikowanego źródła danych, równocześnie pozostając "niezmienionym" na zewnątrz.</p>

<p>Jeżeli chcesz integrować ze sobą różne systemy na poziomie bazy danych, odseparowanie ich od siebie za pomocą <strong>widoków</strong> jest dobrą praktyką (działa to dokładnie tak samo jak wzorzec <strong>fasada</strong>). <strong>Widoki</strong> stanowią swego rodzaju "niezmienne API" dla systemów zewnętrznych.</p>

<h3 id="305-widoki-i-zdarzenia-zdarzenia">Zdarzenia</h3>

<p>Mechanizm <strong>zdarzeń</strong> w bazie <strong>MySQL</strong> jest czymś w rodzaju harmonogramu wykonywania określonych czynności. Mechanizm ten dostępny jest również na wielu innych bazach danych, aczkolwiek niekiedy pod innymi nazwami - na przykład na bazie danych <strong>ORACLE</strong> mechanizm ten nazywa się zadaniami (<i>ang. jobs</i>).</p>

<h4>Włączenie schedulera</h4>

<p>Aby rozpocząć pracę, musisz się w <strong>MySQL Workbenchu</strong> przelogować na użytkownika z uprawnieniami administracyjnymi (czyli na użytkownika <strong>root</strong> - najprościej to zrobić poprzez zamknięcie <strong>MySQL Workbencha </strong>i zalogowanie się na użytkownika <strong>root</strong> podczas jego otwierania). Gdy już to zrobisz, wykonaj poniższe polecenie, wyświetlające informację o uruchomionych w bazie danych procesach:</p>

<a class="img-modal-group" href="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_61.png" style="width: 100%"><img src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_61.png" style="width: auto; max-width: 100%;"></a>

<p>Jeżeli na powyższej liście nie widzisz procesu, którego właścicielem jest użytkownik "event scheduler", to znaczy, że mechanizm zdarzeń jest u Ciebie wyłączony. Aby go włączyć, wykonaj poniższe polecenie:</p>

<a class="img-modal-group" href="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_62.png" style="width: 100%"><img src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_62.png" style="width: auto; max-width: 100%;"></a>

<p>Następnie ponownie sprawdź listę uruchomionych procesów:</p>

<a class="img-modal-group" href="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_63.png" style="width: 100%"><img src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_63.png" style="width: auto; max-width: 100%;"></a>

<p>Proces, którego właścicielem jest "event scheduler" pojawił się na liście. Jego aktualny status to oczekiwanie na zadanie, przy czym kolejka zadań jest pusta ("<i>Waiting on empty queue</i>").</p>

<h4>Tworzenie zdarzenia</h4>

<p>Ogólna (i uproszczona) składnia pozwalająca na stworzenie nowego zdarzenia w harmonogramie jest następująca:</p>

<pre class="line-numbers language-sql code-toolbar"><code class=" language-sql">CREATE EVENT &lt;event_name&gt;
ON SCHEDULE &lt;schedule&gt;
DO &lt;instructions&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code><div class="toolbar"></div></pre>

<p>gdzie <code class=" language-sql">event_name</code> jest nazwą pod jaką chcemy zapisać nasze zdarzenie, <code class=" language-sql">instructions</code> to instrukcje do wykonania w ramach zdarzenia (pojedyncze polecenie lub blok poleceń umieszczony wewnątrz <code class=" language-sql">BEGIN ... END</code>), natomiast <code class=" language-sql">schedule</code> to sposób zaharmonogramowania.</p>

<p>Dostępne sposoby zaharmonogramowania, to:</p>

<ul>
    <li><code class=" language-sql">AT &lt;timestamp&gt; [ + INTERVAL &lt;interval&gt;]</code> wykonujące polecenie <code class=" language-sql">instructions</code> o wskazanym czasie (<code class=" language-sql">timestamp</code>), rozszerzone opcjonalnie o powtarzanie co wskazany odstęp czasu (<code class=" language-sql">interval</code>) lub</li>

    <li><code class=" language-sql">EVERY &lt;interval&gt;</code> wykonujące polecenie <code class=" language-sql">instructions</code> co wskazany interwał czasu (<code class=" language-sql">interval</code>) począwszy od momentu zdefiniowania zdarzenia.</li>
</ul>

<p>Jako <code class=" language-sql">interval</code> należy podać liczbę jednostek oraz jednostkę miary, którą może być: <code class=" language-sql">YEAR</code>, <code class=" language-sql">QUARTER</code>, <code class=" language-sql">MONTH</code>, <code class=" language-sql">WEEK</code>, <code class=" language-sql">DAY</code>, <code class=" language-sql">HOUR</code>, <code class=" language-sql">MINUTE</code>, <code class=" language-sql">SECOND</code>.</p>

<p>Utwórz nowe zdarzenie:</p>

<a class="img-modal-group" href="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_64.png" style="width: 100%"><img src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_64.png" style="width: auto; max-width: 100%;"></a>

<p>W pierwszej linii musimy wskazać, z którym schematem (bazą danych) chcemy pracować, ponieważ jesteśmy zalogowani jako użytkownik <strong>root</strong>, który posiada uprawnienia do wszystkich schematów dostępnych na serwerze.</p>

<p>W liniach od 3 do 5 definiujemy nowe zdarzenie o nazwie <code class=" language-sql">UPDATE_VIPS</code>, które ma się wykonywać co jedną minutę, a jego działanie polega na wywołaniu procedury składowanej <code class=" language-sql">UpdateVipLevels()</code>.</p>




<p>Sprawdź jak aktualnie wygląda lista procesów:</p>

<a class="img-modal-group" href="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_65.png" style="width: 100%"><img src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_65.png" style="width: auto; max-width: 100%;"></a>

<p>Proces event schedulera posiada status oczekiwania na następną aktywację (ramka powyżej). W kolumnie <code class=" language-sql">Time</code> widać informację o tym ile czasu upłynęło od poprzedniego uruchomienia - na załączonym zdjęciu jest to 7 sekund. Pozostało więc 53 sekundy do kolejnego uruchomienia.</p>

<p>Wyczyść teraz pole <code class=" language-sql">VIP_LEVEL</code> w tabeli <code class=" language-sql">READERS</code>, a następnie wyświetl jej zawartość:</p>

<a class="img-modal-group" href="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_66.png" style="width: 100%"><img src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_66.png" style="width: auto; max-width: 100%;"></a>

<p>Na powyższym zdjęciu widać, że kolumna <code class=" language-sql">VIP_LEVEL</code> została "wyczyszczona" (czyli ustawiona na wartość <strong>"Not set"</strong>).</p>

<p>Odczekaj teraz minutę i sprawdź ponownie zawartość tabeli <code class=" language-sql">READERS</code>:</p>

<a class="img-modal-group" href="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_67.png" style="width: 100%"><img src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_67.png" style="width: auto; max-width: 100%;"></a>

<p>Kolumna <code class=" language-sql">VIP_LEVEL</code> została ponownie wypełniona prawidłowymi wartościami. Widać więc, że procedura <code class=" language-sql">UpdateVipLevels()</code> została wywołana zgodnie z harmonogramem.</p>

<p>Mechanizm <strong>zdarzeń</strong> ma bardzo szerokie spektrum zastosowań. Typowe użycie to cykliczne aktualizowanie statystyk (o ile przechowujesz je w tabelach bazy danych).</p>

<p>Aby usunąć jakieś zdarzenie z harmonogramu, możesz skorzystać z polecenia:</p>

<pre class="language-sql code-toolbar"><code class=" language-sql">DROP EVENT &lt;event_name&gt;</code><div class="toolbar"></div></pre>

                        </div>
                    </div>
                                        <div class="card-block task-card">
                        <h3 id="305-widoki-i-zdarzenia-zadanie-tworzenie-zdarzenia-korzystajacego-z-widoku">Zadanie: <span class="task-title">Tworzenie zdarzenia korzystającego z widoku</span></h3>
                        <div class="task-content">
                            <p>W module 22.1 w ramach zadania przygotowałeś procedurę składowaną <code class=" language-sql">UpdateBestsellers()</code>. Wykorzystamy efekty jej działania do monitorowania ilości książek posiadających status bestsellera w danym momencie czasu. W tym celu stwórz skrypt <strong>SQL</strong>, który:</p>

<ol>
    <li>Stworzy tabelę <code class=" language-sql">STATS</code> posiadającą kolumny:</li>
    <li><code class=" language-sql">STAT_ID INT(11) AUTO INCREMENT PRIMARY KEY</code></li>
    <li><code class=" language-sql">STAT_DATE DATETIME NOT NULL</code></li>
    <li><code class=" language-sql">STAT VARCHAR(20) NOT NULL</code></li>
    <li><code class=" language-sql">VALUE INT(11) NOT NULL</code></li>
    <li>Stworzy widok <code class=" language-sql">BESTSELLERS_COUNT</code> zwracający informację o ilości bestsellerów w zbiorze książek (jeden rekord i jedna kolumna z ilością - po prostu pojedyncza liczba)</li>
    <li>Stworzy <strong>zdarzenie</strong> wywołujące procedurę <code class=" language-sql">UpdateBestSellers()</code>, a także zapisujące wyniki pobrane z widoku <code class=" language-sql">BESTSELLERS_COUNT</code> do tabeli <code class=" language-sql">STATS</code>. W polu <code class=" language-sql">STAT</code> umieszczona będzie nazwa statystyki <strong>"BESTSELLERS"</strong>, natomiast w polu <code class=" language-sql">VALUE</code> znajdzie się informacja o ilości bestsellerów odczytana z widoku <code class=" language-sql">BESTSELLERS_COUNT</code></li>
</ol>

<p>Link do skryptu <strong>SQL</strong> wklej poniżej i prześlij do mentora.</p>
<p>Pamiętaj, aby po wykonaniu zadania wyłączyć (usunąć) utworzone zdarzenie - w przeciwnym wypadku, Twoja tabela <code class=" language-sql">STATS</code> będzie się ciągle rozrastała o nowe wartości statystyk (co minutę).</p>
                        </div>
                    </div>
                                        <div class="card-block submodule-footer clearfix ">
                                                <div class="clearfix">
                                                                                <a href="https://kodilla.com/pl/bootcamp-task/146/310999" target="_blank" class="btn btn-info-outline">Podgląd zadania</a>
                            <form target="_blank" class="form-inline project-link-form">
                                <div class="form-group">
                                    <input type="text" name="link" class="form-control" value="">
                                </div>
                                <button type="submit" class="btn  btn-success-outline ">Wyślij link <i class="fa fa-check"></i></button>
                            </form>
                                                                                                    </div>
                    </div>
                </section>
                                    
                <section id="submodule-461" class="card submodule " data-bootcamp-user-submodule-id="311000">
                <!-- klasy dla section: completed current comments -->
                    <div class="card-block submodule-header clearfix">
                        <i class="fa fa-check-circle-o fa-2x"></i>
                        <i class="fa fa-play-circle-o fa-2x"></i>
                        <i class="fa fa-exclamation-circle fa-2x"></i>
                        <i class="fa fa-send-o fa-2x"></i>
                        <h2 class="bootcamp-submodule-name">30.6. <span>Indeksy i plany zapytań</span></h2>
                                            </div>
                    <div class="card-block">
                        <div class="submodule-content">
                            <p>Nasze dotychczasowe ćwiczenia i pracy odbywały się w warunkach, w których każda tabela zawierała kilka lub kilkanaście rekordów. Takie warunki odbiegają nieco od rzeczywistych warunków, w jakich pracują aplikacje wdrożone produkcyjnie. Tabele w rzeczywistych bazach danych zawierają często tysiące, setki tysięcy, a nierzadko i miliony rekordów danych.</p>

<p>Przy dużych zbiorach danych istotne zaczynają być aspekty wydajnościowe, którymi dotychczas się nie zajmowaliśmy.</p>

<p>Pracę rozpoczniemy od przygotowania danych testowych, na których będziemy mogli sprawdzić jak zachowuje się baza danych, gdy zawiera dużo danych.</p>

<p>Nim do tego przejdziemy, musimy zmienić domyślne ustawienia <strong>MySQL Workbencha</strong> w zakresie maksymalnej długości czasu, przez jaki <strong>MySQL Workbench</strong> oczekuje na odpowiedź od serwera bazy danych (<i>ang. timeout</i>). Uruchom w <strong>MySQL Workbenchu</strong> funkcję <i>Edit-&gt;Preferences</i>, a następnie przejdź do gałęzi "<i>SQL Editor</i>":</p>

<a class="img-modal-group" href="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_68.png" style="width: 100%"><img src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_68.png" style="width: auto; max-width: 100%;"></a>

<p>Domyślnym ustawieniem <i>DBMS connection read time out</i> jest 30 sekund - to stanowczo za mało jak na nasze potrzeby - za chwilę dowiesz się dlaczego. Zmieńmy to ustawienie na jedną godzinę, czyli 3600 sekund.</p>

<div class="bc-note alert-danger">
    <h4 class="alert-heading text-center">Ważne</h4>
    <p>Po wprowadzeniu zmian w oknie <strong>Preferences</strong> musisz zamknąć i ponownie uruchomić <strong>MySQL Workbench</strong>, aby zmiany były widoczne.</p>
</div>


<h3 id="306-indeksy-i-plany-zapytan-przygotowanie-danych-testowych">Przygotowanie danych testowych</h3>

<p>Po wprowadzeniu zmian i zrestartowaniu <strong>MySQL Workbencha</strong>, zaloguj się do bazy danych jako użytkownik <strong>kodilla_user</strong>.</p>

<p>Teraz nadszedł czas na utworzenie tabeli, którą będziemy chcieli wypełnić dużą ilością danych. Utwórz tabelę <code class=" language-sql">PHONES</code>:</p>

<a class="img-modal-group" href="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_69.png" style="width: 100%"><img src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_69.png" style="width: auto; max-width: 100%;"></a>

<p>Do wypełnienia tabeli danymi skorzystamy z funkcji <code class=" language-sql">RAND()</code>, która zwraca liczbę losową z zakresu 0 - 0,9999... , a także z funkcji <strong>ROUND(n)</strong>, która zaokrągla argument <strong>n</strong> do najbliższej wartości całkowitej. Wykorzystamy również funkcję <strong>MOD(k, n)</strong>, która zwraca modulo (resztę) z dzielenia <strong>k</strong> przez <strong>n</strong>.</p>

<p>Napisz teraz procedurę <code class=" language-sql">FillTestData()</code>:</p>

<a class="img-modal-group" href="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_70.png" style="width: 100%"><img src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_70.png" style="width: auto; max-width: 100%;"></a>

<p>Powyższa procedura tworzy w tabeli <code class=" language-sql">PHONES</code> sto tysięcy rekordów, w których:</p>

<ul>
    <li>pole <code class=" language-sql">FIRSTNAME</code> ma ustawiany tekst "Firstname number " + <code class=" language-sql">k</code></li>
    <li>pole <code class=" language-sql">LASTNAME</code> ma ustawiany tekst "Lastname number " + <code class=" language-sql">k</code></li>
    <li>pole <code class=" language-sql">PHONENUM</code> ma ustawianą losową wartość o wartości od 0 do 999999999</li>
</ul>

<p>W celu zoptymalizowania jej działania <strong>COMMIT</strong> wykonuje się co 5 tysięcy rekordów.</p>


<div class="bc-note alert-info">
    <h4 class="alert-heading text-center">Wykonywanie COMMITów co pewien przyrost zmian</h4>
    <p>Wykonanie operacji <strong>COMMIT</strong> jest dość czasochłonne i wpływa na wydajność. Jeżeli wykonujemy operacje o charakterze wsadowym - czyli modyfikujemy wiele rekordów w bazie danych w jednym cyklu przetwarzania, warto dzielić te zmiany na "paczki" po kilkadziesiąt czy kilkaset rekordów (czasem więcej) zatwierdzanych jednym zbiorczym <strong>COMMITem</strong>, aby zminimalizować wpływ operacji <strong>COMMIT</strong> na wydajność wykonywania operacji wsadowej.</p>
</div>

<p>Następnie uruchom napisaną procedurę:</p>

<a class="img-modal-group" href="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_71.png" style="width: 100%"><img src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_71.png" style="width: auto; max-width: 100%;"></a>

<p>Teraz jest dobry moment na to, aby przygotować sobie kawę lub kanapkę, bo to trochę potrwa… ;)</p>


<p>Czas trwania zależy od komputera i uruchomionych na nim procesów. U nas wykonanie powyższego skryptu trwało 18 minut.</p>

<p>W czasie oczekiwania na wykonanie skryptu, możesz obejrzeć statystyki serwera bazy danych - uruchom funkcję <i>Server -&gt; Server status</i>. Pojawi się ekran z wykresami po prawej stronie. Zaznaczyliśmy czerwonymi strzałkami miejsca, w których widać wykonujące się <strong>COMMITy</strong> co 5 tysięcy wstawionych rekordów do tabeli <code class=" language-sql">PHONES</code>:</p>

<a class="img-modal-group" href="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_72.png" style="width: 100%"><img src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_72.png" style="width: auto; max-width: 100%;"></a>

<h3 id="306-indeksy-i-plany-zapytan-analiza-wydajnosci">Analiza wydajności</h3>

<p>Po wykonaniu procedury, masz w tabeli <code class=" language-sql">PHONES</code> sto tysięcy rekordów. Nie jest to jeszcze jakaś szczególnie duża liczba, jednak efekty wydajnościowe powinny być już widoczne.</p>

<p>Stwórz teraz następną tabelę:</p>

<a class="img-modal-group" href="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_73.png" style="width: 100%"><img src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_73.png" style="width: auto; max-width: 100%;"></a>

<p>Tabela ta będzie wypełniana histogramem pokazującym rozkład numerów telefonicznych (ile jest numerów z podanego zakresu). Zakresy będą ustawione co tysiąc numerów. Rozkład numerów w tabeli <code class=" language-sql">PHONES</code> powinien być mniej więcej równomierny, ponieważ generator liczb pseudolosowych wbudowany w <strong>MySQL</strong> ma rozkład równomierny (czyli każda z liczb z zakresu losowania, losowana jest z takim samym prawdopodobieństwem).</p>

<p>Następnie napisz procedurę wypełniającą tabelę z histogramem:</p>

<a class="img-modal-group" href="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_74.png" style="width: 100%"><img src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_74.png" style="width: auto; max-width: 100%;"></a>

<p>Powyższa procedura dzieli zakresy numerów telefonicznych co sto tysięcy (linia nr 17) i dla każdego z zakresów oblicza jest mieszczących się w nim numerów telefonów w tabeli <code class=" language-sql">PHONES</code> (linie od 10 do 13). Następnie informacja ta jest zapisywana w tabeli <code class=" language-sql">PHONESTATS</code> (linie nr 14 i 15). Przed całą operacją tabela z histogramem jest czyszczona (linia nr 7).</p>

<p>Ze względu na czyszczenie tabeli <code class=" language-sql">PHONESTATS</code> w linii nr 7, konieczne jest wprowadzenie zmiany w konfiguracji <strong>MySQL Workshop</strong>. Uruchom funkcję <i>Edit-&gt;Preferences</i>, a następnie przejdź do gałęzi <i>SQL Editor</i>:</p>

<a class="img-modal-group" href="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_75.png" style="width: 100%"><img src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_75.png" style="width: auto; max-width: 100%;"></a>

<p>Na powyższym ekranie należy odznaczyć checkbox przy polu <i>Safe Updates</i>. Dzięki czemu możliwe stanie się wykonanie operacji <code class=" language-sql">DELETE FROM PHONESTATS;</code></p>

<div class="bc-note alert-danger">
    <h4 class="alert-heading text-center">Ważne</h4>
    <p>Po wprowadzeniu zmian w oknie <strong>Preferences</strong> musisz zamknąć i ponownie uruchomić <strong>MySQL Workbench</strong>, aby zmiany były widoczne.</p>
</div>

<p>Spróbuj teraz uruchomić procedurę obliczającą statystyki:</p>

<a class="img-modal-group" href="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_76.png" style="width: 100%"><img src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_76.png" style="width: auto; max-width: 100%;"></a>

<p>Przez pewien czas w oknie <i>Output</i> w kolumnie <i>Duration</i> będzie się pojawiał znak zapytania (zaznaczone na zdjęciu powyżej). Oznacza to, że obliczenia wciąż trwają. U nas zakończyły się po 33 sekundach:</p>

<a class="img-modal-group" href="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_77.png" style="width: 100%"><img src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_77.png" style="width: auto; max-width: 100%;"></a>

<p>Sprawdźmy zawartość tabeli <code class=" language-sql">PHONESTATS</code>:</p>

<a class="img-modal-group" href="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_78.png" style="width: 100%"><img src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_78.png" style="width: auto; max-width: 100%;"></a>

<p>Na zdjęciu powyżej widoczne są zakresy numerów telefonów oraz informacja o ilości numerów mieszczących się w tych zakresach. Procedura obliczająca statystyki działa poprawnie.</p>

<p>Zastanówmy się teraz - dlaczego wykonywała się tak długo? Odpowiedź jest stosunkowo prosta - tabela <code class=" language-sql">PHONES</code> zawiera sto tysięcy numerów telefonów. Przeszukiwanie tej tabeli odbywa się każdorazowo przy sprawdzaniu ilości numerów mieszczących się w podanym zakresie. To spora ilość danych do przeszukania. Tym bardziej, że przeszukiwanie odbywa się na zasadzie porównywania każdego rekordu z żądanymi wartościami brzegowymi zakresów.</p>

<p>Czy można to jakoś przyspieszyć? Oczywiście. Wystarczy zastosować indeksy.</p>

<h3 id="306-indeksy-i-plany-zapytan-indeks-typu-btree">Indeks typu BTREE</h3>

<p>Indeks jest strukturą danych, umieszczaną obok tabeli, służącą do przyspieszenia operacji wyszukiwania danych. Poniżej pokazano graficzną reprezentację indeksu oraz ścieżkę przejścia przez indeks podczas wyszukiwania:</p>

<p>BTREE, czyli inaczej <i>zbalansowane drzewo</i>, to struktura danych, która pozwala na szybkie wyszukiwanie interesujących nas danych. Działa on w ten sposób, że dzieli zbiór który chcemy przeszukiwać na wiele różnych poziomów (w zależności od ilości elementów).</p>

<p>Każdy z poziomów jest podzielony na węzły, które możesz wyobrazić sobie jako małe pudełka, które na wieczku mają naklejoną etykietkę opisującą wartość najwyższego elementu jaki przechowują. Kiedy chcesz znaleźć element o wartości 5, wykonujesz następujące czynności:</p>

<ul>
    <li>porządkujesz skrzynki rosnąco według wartości etykietki, </li>
    <li>sprawdzasz kolejno etykietkę każdej skrzynki, szukając tej z etykietką o wartości większej lub równej 5</li>
    <li>otwierasz tę skrzynkę</li>
</ul>

<p>Te kroki powtarzasz dopóki nie otworzysz skrzynki, która zamiast kolejnych skrzynek zawiera karteczki z wartościami - powinno być ich relatywnie mało i na pewno znajduje się wśród nich Twoja karteczka. Dlaczego dzielić dane na skrzynki, skoro można mieć wszystko na jednej "stercie"? Dlatego, że w ten sposób znajdziemy potrzebne nam dane znacznie szybciej - zamiast przeglądać wszystkie karteczki ze sterty, patrzymy tylko na zawartość kilku skrzynek i gotowe :)</p>

<a class="img-modal-group" href="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_79.png" style="width: 100%"><img src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_79.png" style="width: auto; max-width: 100%;"></a>


<p>Ilość poziomów węzłów (skrzynek) może być dowolna. Z reguły jednak wystarczy kilka poziomów aby obsłużyć miliony rekordów w liściach.</p>

<p>Skrót BTREE pochodzi od <strong>Balanced Tree</strong> (zbalansowane drzewo). Oznacza to, że do odnalezienia dowolnego elementu danych potrzeba zawsze przejść przez tyle samo poziomów węzłów.</p>

<p>Na rysunku pokazano przykład wyszukiwania numeru telefonu <strong>275000000</strong>. Najpierw w węźle drugiego poziomu odnajdywany jest element o najbliższym, ale nie mniejszym numerze od szukanego (jest to 720145080). Następnie po przejściu przez referencję (zielona strzałka) do właściwego węzła pierwszego poziomu, ponownie następuje wyszukiwanie elementu o najbliższym, ale nie mniejszym numerze od szukanego. Takim elementem jest 410234777. Po ponownym przejściu przez referencję do liścia (zielona strzałka), odnajdywany jest szukany obiekt w małym zbiorze danych (kilka-kilkanaście rekordów).</p>

<p>Sprawdźmy teraz czy <strong>MySQL</strong> korzysta z jakichś indeksów przy wykonywania naszego zapytania, które wykonywane jest wewnątrz procedury <code class=" language-sql">CalcPhoneStats()</code>. Do tego celu skorzystamy z instrukcji <strong>EXPLAIN</strong> o ogólnej strukturze:</p>

<pre class="line-numbers language-sql code-toolbar"><code class=" language-sql">EXPLAIN &lt;sql_statement&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code><div class="toolbar"></div></pre>

<p>gdzie <code class=" language-sql">sql_statement</code> jest zapytaniem <strong>SQL</strong>, które chcemy przeanalizować.</p>

<p>Wykonaj poniższą instrukcję <code class=" language-sql">EXPLAIN</code>:</p>

<a class="img-modal-group" href="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_80.png" style="width: 100%"><img src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_80.png" style="width: auto; max-width: 100%;"></a>

<p>Instrukcja <code class=" language-sql">EXPLAIN</code> wyświetla szereg informacji o zapytaniu, między innymi kolejność wykonywania podzapytań (gdy zapytanie jest złożone) oraz informację o sposobie przeszukiwania tabel (w kolumnie <code class=" language-sql">Extra</code>), a także dostępnych i użytych indeksach (w kolumnach <code class=" language-sql">possible_keys</code> oraz <code class=" language-sql">key</code>). </p>

<p>Na powyższym zdjęciu widać, że <strong>MySQL</strong> nie skorzystał z żadnego indeksu ani żaden nie był dostępny.</p>

<h3 id="306-indeksy-i-plany-zapytan-tworzenie-indeksu">Tworzenie indeksu</h3>

<p>W przypadku gdy w bazie danych brak jest zdatnych do użycia indeksów, możesz utworzyć własny przy pomocy polecenia <code class=" language-sql">CREATE INDEX</code> o ogólnej (uproszczonej) strukturze:</p>

<pre class="line-numbers language-sql code-toolbar"><code class=" language-sql">CREATE INDEX &lt;index_name&gt; ON &lt;table_name&gt; (&lt;columns&gt;)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code><div class="toolbar"></div></pre>

<p>gdzie <code class=" language-sql">index_name</code> to nazwa, pod jaką utworzony zostanie indeks, <code class=" language-sql">table_name</code> to tabela, której dotyczyć ma indeks, natomiast <code class=" language-sql">columns</code> to nazwa kolumny (lub kilku kolumn oddzielonych przecinkami), dla której ma być utworzony indeks.</p>

<p>Utwórzmy więc indeks dla tabeli <code class=" language-sql">PHONES</code>:</p>

<a class="img-modal-group" href="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_81.png" style="width: 100%"><img src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_81.png" style="width: auto; max-width: 100%;"></a>

<p>W tym momencie obok tabeli <code class=" language-sql">PHONES</code> powstała nowa struktura (balanced tree), która przyspiesza wyszukiwanie w tabeli <code class=" language-sql">PHONES</code> po kolumnie <code class=" language-sql">PHONENUM</code>.</p>

<p>Sprawdźmy jak teraz wygląda plan zapytania:</p>

<a class="img-modal-group" href="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_82.png" style="width: 100%"><img src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_82.png" style="width: auto; max-width: 100%;"></a>

<p>Optymalizator bazy danych ustawił plan wykonania zapytania w taki sposób, że skorzysta z indeksu <code class=" language-sql">PHONENO</code>, który przed chwilą utworzyliśmy.</p>

<p>Sprawdźmy więc jaki efekt udało nam się osiągnąć. Poprzednio wykonanie procedury <code class=" language-sql">CalcPhoneStats()</code> zajęło 33 sekundy. Uruchom tę procedurę ponownie:</p>

<a class="img-modal-group" href="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_83.png" style="width: 100%"><img src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/java-22_83.png" style="width: auto; max-width: 100%;"></a>

<p>Tym razem procedura wykonała się w nieco ponad dwie sekundy! A to wszystko dzięki dodaniu jednego małego indeksu :)</p>


                        </div>
                    </div>
                                        <div class="card-block task-card">
                        <h3 id="306-indeksy-i-plany-zapytan-zadanie-indeksy-dla-biblioteki">Zadanie: <span class="task-title">Indeksy dla biblioteki</span></h3>
                        <div class="task-content">
                            <p>Napisz skrypt <strong>SQL</strong> dodający indeksy do tabel <code class=" language-sql">BOOKS</code> oraz <code class=" language-sql">READERS</code>, które przyspieszą wyszukiwanie po imieniu i nazwisku czytelnika oraz po tytule książki. W skrypcie zawrzyj również instrukcję wyświetlającą plan zapytania wybierającego z tabeli <code class=" language-sql">READERS</code> czytelników o imieniu <strong>"John"</strong>. Wyświetl plan zapytania przed dodaniem indeksu oraz po dodaniu indeksu.</p>

<p>Link do skryptu wklej poniżej i wyślij do mentora.</p>
                        </div>
                    </div>
                                        <div class="card-block submodule-footer clearfix ">
                                                <div class="clearfix">
                                                                                <a href="https://kodilla.com/pl/bootcamp-task/146/311000" target="_blank" class="btn btn-info-outline">Podgląd zadania</a>
                            <form target="_blank" class="form-inline project-link-form">
                                <div class="form-group">
                                    <input type="text" name="link" class="form-control" value="">
                                </div>
                                <button type="submit" class="btn  btn-success-outline ">Wyślij link <i class="fa fa-check"></i></button>
                            </form>
                                                                                                    </div>
                    </div>
                </section>
                            </main>
        </div>
    </section>
</main>

<script type="text/x-translation" data-translation-name="SentBootcampLinkReviewFormMessage">Wysłano link do zatwierdzenia</script>
    <div id="alerts">
    <div class="alert alert-danger" role="alert" style="display: none;">
        <i class="fa fa-exclamation" aria-hidden="true"></i>
        <button type="button" class="close" data-hide="alert" aria-label="Zamknij">
            <span aria-hidden="true">×</span>
            <span class="sr-only">Zamknij</span>
        </button>
        <ul>
                        </ul>
    </div>
    <div class="alert alert-success" role="alert" style="display: none;">
        <i class="fa fa-check" aria-hidden="true"></i>
        <button type="button" class="close" data-hide="alert" aria-label="Zamknij">
            <span aria-hidden="true">×</span>
            <span class="sr-only">Zamknij</span>
        </button>
        <ul>
                </ul>
    </div>
    <div class="alert alert-warning" role="alert" style="display: none;">
        <i class="fa fa-warning" aria-hidden="true"></i>
        <button type="button" class="close" data-hide="alert" aria-label="Zamknij">
            <span aria-hidden="true">×</span>
            <span class="sr-only">Zamknij</span>
        </button>
        <ul>
                </ul>
    </div>
    <div class="alert alert-info" role="alert" style="display: none;">
        <i class="fa fa-info" aria-hidden="true"></i>
        <button type="button" class="close" data-hide="alert" aria-label="Zamknij">
            <span aria-hidden="true">×</span>
            <span class="sr-only">Zamknij</span>
        </button>
        <ul>
                    </ul>
    </div>
    <div class="container">
        <div class="alert alert-notify" role="alert" style="display: none;">
            <i class="fa fa-info" aria-hidden="true"></i>
            <button type="button" class="close" data-hide="alert" aria-label="Zamknij">
                <span aria-hidden="true">×</span>
                <span class="sr-only">Zamknij</span>
            </button>
            <ul>
                            </ul>
        </div>
    </div>
</div>
    <div class="modal fade informator-modal" id="informator" tabindex="-1" role="dialog" aria-labelledby="informatorModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <img src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/logo-menu.png" alt="Logo Kodilla" class="brand-logo">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <i class="fa fa-times" aria-hidden="true"></i>
                </button>
            </div>
            <div class="modal-body content-container">
                <h3>Zamów szczegółowy informator</h3>
                <form class="row js-ajax-form" data-view-class="InformatorForm" action="https://kodilla.com/pl/download-informator" method="post">
                    <input type="hidden" name="ga-pobieranie-informatora-z-modala" value="wypelnienie">
                    <input type="hidden" name="tags[0]" value="informator">
                                        <div class="user-data-container">
                        <input type="text" class="form-control" name="firstname" placeholder="Imię">
                        <input type="text" class="form-control" name="surname" placeholder="Nazwisko">
                    </div>
                    <div class="user-data-container">
                        <input type="email" class="form-control" name="email" placeholder="Email" required="">
                        <input type="tel" class="form-control" name="phone" placeholder="Numer telefonu" pattern="^([\+][0-9]{1,3}([ \.\-])?)?([\(]{1}[0-9]{3}[\)])?([0-9 \.\-]{1,15})$" title="Wpisz poprawny numer telefonu, np. 453 674 897" minlength="9" maxlength="15" data-custom-message="Wpisz poprawny numer telefonu, np. 453 674 897">
                    </div>
                    <div class="terms-box">
                        <label>
                            <input name="accept_terms" value="true" data-custom-message="Prosimy o zaakceptowanie regulaminu" type="checkbox" class="form-control input-checkbox" required="">
                            <span>Akceptuję <a target="_blank" href="https://kodilla.com/pl/terms">regulamin</a>  i nie wnoszę zastrzeżeń</span>
                        </label>
                    </div>
                    <div class="personal-terms-box">
                        <label>
                            <input name="accept_marketing" value="true" data-custom-message="Jeśli chcesz otrzymać dostęp do materiałów, konieczna jest akceptacja obydwu zgód" type="checkbox" class="form-control input-checkbox" required="">
                            <span>Chcę otrzymywać newsletter, informacje o promocjach i produktach dostępnych w Kodilla.
                                <span class="details-button" data-action="show-details" data-identifier="personal-terms-details-informator">Czytaj więcej</span>
                                <span class="display-none" data-identifier="personal-terms-details-informator">Wyrażam zgodę na otrzymywanie informacji handlowych od Kodilla na podany przeze mnie adres e-mail. Zgoda jest dobrowolna, jednakże niezbędna do otrzymywania informacji o produktach, promocjach i o tym, co u nas słychać. Administratorem danych jest Codemy S.A. z siedzibą we Wrocławiu, ul. Racławicka 13. Mam prawo cofnąć zgodę w każdym czasie, jednak wtedy nie będę otrzymywać informacji. Dane mogą być przetwarzane pomimo cofnięcia zgody wyłącznie w takim zakresie i celu, w jakim ich przetwarzanie jest niezbędne do ustalenia, dochodzenia lub obrony roszczeń Administratora w związku z udzieloną zgodą. Mam prawo dostępu do danych, sprostowania, usunięcia, ograniczenia przetwarzania, prawo wniesienia sprzeciwu, skargi do organu nadzorczego i przeniesienia danych. Szczegółowe informacje znajdują się na stronie kodilla.com, zakładka "Polityka Prywatności".</span>
                            </span>
                        </label>
                    </div>
                    <div class="display-none">
                        <input type="text" name="myName" value="">
                    </div>
                    <div class="">
                        <button type="submit" class="btn btn-primary">
                            Pobierz Informator
                            <i data-role="loading-icon" class="fa fa-spinner fa-spin fa-1x fa-fw display-none"></i>
                        </button>
                    </div>
                </form>
                <a href="https://kodilla.com/pl/informator" id="informator-link" target="_blank" class="display-none"></a>
            </div>
            <div class="modal-footer">
                <p>Pobranie informatora do niczego nie zobowiązuje</p>
            </div>
        </div>
    </div>
</div>
<footer class="site-footer">
                <section class="footer-lower">
            <nav class="container">
                <a class="navbar-img" href="https://kodilla.com/pl">
                    <svg id="kodilla-logo" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 168 29.553" width="168" height="30">
                        <defs>
                            <style>
                                .footer-logo-fill {
                                    fill: #fff;
                                }
                            </style>
                        </defs>
                        <g id="Group_1" data-name="Group 1" transform="translate(23.59)">
                            <path id="KODILLA_copy_5_1_" class="footer-logo-fill" d="M78.058,0a14.758,14.758,0,1,0,.075,0Zm0,23.739a8.939,8.939,0,0,1-8.944-8.907V14.8c0-4.957,4.584-.708,8.907-.708,4.919,0,9.019-4.211,9.019.708a8.978,8.978,0,0,1-8.981,8.944Z" transform="translate(-63.3)"></path>
                            <ellipse id="eye_copy_4_1_" class="footer-logo-fill" cx="3.876" cy="3.876" rx="3.876" ry="3.876" transform="translate(9.462 13.2) rotate(-28.436)"></ellipse>
                        </g>
                        <path id="Path_1" data-name="Path 1" class="footer-logo-fill" d="M0,29.819V.9H6.671V13.347L17.255.9h7.491L13.938,13.794,25.491,29.819h-7.6l-8.2-11.665-3.019,3.13v8.5H0Z" transform="translate(0 -0.565)"></path>
                        <path id="Path_2" data-name="Path 2" class="footer-logo-fill" d="M151.4,29.819V.9h10.807a15.515,15.515,0,0,1,6.261,1.155,12.966,12.966,0,0,1,4.509,3.093A12.918,12.918,0,0,1,175.7,9.732a17.245,17.245,0,0,1,.932,5.59,16.821,16.821,0,0,1-1.006,5.963,12.227,12.227,0,0,1-2.907,4.547,13.484,13.484,0,0,1-4.547,2.944,15.964,15.964,0,0,1-5.925,1.043Zm18.41-14.5a11.274,11.274,0,0,0-.522-3.466,7.723,7.723,0,0,0-1.491-2.72,6.616,6.616,0,0,0-2.385-1.752,8.055,8.055,0,0,0-3.205-.6h-4.1v17.18h4.1a7.985,7.985,0,0,0,3.242-.634,6.8,6.8,0,0,0,2.385-1.826,8.286,8.286,0,0,0,1.453-2.72A11.634,11.634,0,0,0,169.81,15.322Z" transform="translate(-94.978 -0.565)"></path>
                        <path id="Path_3" data-name="Path 3" class="footer-logo-fill" d="M228.3,29.819V.9h6.671V29.819Z" transform="translate(-143.219 -0.565)"></path>
                        <path id="Path_4" data-name="Path 4" class="footer-logo-fill" d="M259.9,29.819V.9h6.671V23.968h14.012v5.851Z" transform="translate(-163.043 -0.565)"></path>
                        <path id="Path_5" data-name="Path 5" class="footer-logo-fill" d="M327.371,23.931V.9H320.7V29.819h18.522l2.124-5.851H327.371Z" transform="translate(-201.185 -0.565)"></path>
                        <path id="Path_6" data-name="Path 6" class="footer-logo-fill" d="M388.547.9h6.037L405.13,29.819h-6.857l-2.236-6.484h-9.019l-2.2,6.484H378Zm6.373,17.851L391.528,8.54l-3.466,10.211Z" transform="translate(-237.13 -0.565)"></path>
                    </svg>
                </a>
                <ul class="nav">
                    <li>
                        <a href="https://kodilla.com/pl/terms">Regulamin</a>
                    </li>
                    <li>
                        <a href="https://kodilla.com/pl/privacy-policy">Polityka prywatności</a>
                    </li>
                    <li class="nav-item nav-item-last">© 2019 Kodilla</li>
                </ul>
            </nav>
        </section>
    </footer>

<!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KN2WWBH" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->

    <script src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/jquery-2.1.4.min.js.pobrane"></script>
<script src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/js.cookie-2.1.0.min.js.pobrane"></script>
<script src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/jquery-dateFormat.min.js.pobrane"></script>
<script src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/bootstrap.min.js.pobrane"></script>
<script>
    (function () {
        $(document).ready(function () {
            if (window.location.hash === '#informator-modal') {
                showInformator();
            }
        });

        $('[data-action="show-modal"]').click(function() {
            showInformator();
        });

        function showInformator() {
            $('#informator').modal('show');
        }
    })();
</script>
<script src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/fb-eb12e28653.js.pobrane"></script>
<script>
    if (document.querySelector('main.editor')) {
        document.querySelector('body').classList.add('editor');
    }
</script>

<script type="text/javascript">
    (function(e,t,o,n,p,r,i){e.prismGlobalObjectAlias=n;e.pgo=e.pgo||function(){(e.pgo.q=e.pgo.q||[]).push(arguments)};e.pgo.l=(new Date).getTime();r=t.createElement("script");r.src=o;r.async=true;i=t.getElementsByTagName("script")[0];i.parentNode.insertBefore(r,i)})(window,document,"https://prism.app-us1.com/prism.js","pgo");

    pgo('setAccount', '649095895');
    pgo('setTrackByDefault', true);

    pgo('process');
</script>

        <script src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/underscore-min.js.pobrane"></script>
<script src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/backbone-min.js.pobrane"></script>
<script src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/backbone-relational.min.js.pobrane"></script>
<script src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/backbone-super.min.js.pobrane"></script>
<script src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/handlebars-v4.0.5.min.js.pobrane"></script>
<script src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/handlebars-ifCond-4e97d51c76.js.pobrane"></script>
<script src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/application-18f10ee4af.js.pobrane"></script>
<script src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/main-24117cdc80.js.pobrane"></script>
<script src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/settings-2fedaf9385.js.pobrane"></script>
<script src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/delete-account-da2b3de486.js.pobrane"></script>
<script type="text/x-translation" data-translation-name="checkAccountDeleteCalculationMessage">Wynik jest nieprawidłowy</script>
<script src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/forms-ad3eb4ac0e.js.pobrane"></script><div id="fb-root" class=" fb_reset"><div style="position: absolute; top: -10000px; width: 0px; height: 0px;"><div><iframe name="fb_xdm_frame_https" frameborder="0" allowtransparency="true" allowfullscreen="true" scrolling="no" allow="encrypted-media" id="fb_xdm_frame_https" aria-hidden="true" title="Facebook Cross Domain Communication Frame" tabindex="-1" src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/d_vbiawPdxB.html" style="border: none;"></iframe></div><div></div></div></div>
<script src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/alerts-15632e9137.js.pobrane"></script>
<script>
    App.Views.InpageAlertManager = Backbone.View.extend({
        events: {
            'click [data-alert-type][data-alert-text]': 'showAlert'
        },
        showAlert: function(e) {
            var $el = $(e.currentTarget);
            App.alertsView['show'+$el.data('alertType')]([App.Translations($el.data('alertText'))]);
        }
    });
</script>
<script src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/collections-1703f0dc2b.js.pobrane"></script>
<script src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/models-bc38b7a45b.js.pobrane"></script>
<script src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/knowledge-base-bf25c808b5.js.pobrane"></script>
<script>
    App.Views.LearningProgram = Backbone.View.extend({
        events: {
            'click [data-technology-desc-expander]' : 'expandTechnologyDesc'
        },

        initialize: function() {
            this.$allTechnologyDesc = this.$el.find('[data-technology-desc]');
            this.$allTechnologyExpanderIcons = this.$el.find('[data-technology-expander-icon]');
        },

        expandTechnologyDesc: function() {
            this.$allTechnologyDesc.each(function(){
                var $desc = $(this);
                $desc.slideToggle('fast');
            });
            this.$allTechnologyExpanderIcons.each(function(){
                var $icon = $(this);
                $icon.toggleClass("fa-minus");
            });
        },
    });
</script>

    <script src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/tether.min.js.pobrane"></script>
    <script src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/prism.min.js.pobrane"></script>

    <script src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/bootcamp-0671f4eb7d.js.pobrane"></script>
    <script src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/jquery.seourl.min.js.pobrane"></script>
    <script src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/perfect-scrollbar.jquery.min.js.pobrane"></script>
    <script src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/jquery.fancybox.min.js.pobrane"></script>
    <script type="text/javascript">
        $(document).ready(function() {
            $("a.img-modal-group").fancybox();
        });
    </script>

<div class="modal fade" tabindex="-1" role="dialog" id="call-us-modal">
    <div class="modal-dialog modal-dialog-callus" role="document">
        <div class="modal-content call-modal">
            <div id="call-us-step1">
                <h2>Umów się na rozmowę z doradcą Kodilli</h2>
                <p>Krok <span>1/2:</span> Podaj numer telefonu</p>
                <form action="https://kodilla.com/pl/call-us/step1" method="post" id="call-us-form1">
                    <input type="tel" name="phone" id="call-us-input-phone" placeholder="737690577">
                    <button class="btn btn-success" id="call-us-submit-phone">Zarezerwuj rozmowę</button>
                </form>
                <p id="call-us-counter-holder" style="display: none;">Dzisiaj już  <span id="call-counter" data-url="https://kodilla.com/pl/call-us/counter">-</span> <span id="call-us-counter-text" data-one=" osoba zamówiła rozmowę z nami." data-few=" osoby zamówiły rozmowę z nami." data-more=" osób zamówiło rozmowę z nami."></span></p>
                <div class="data-protection">
                    <p>Twój numer telefonu nie będzie wykorzystywany w celach marketingowych ani przekazany dalej. Tylko oddzwonimy. Dane są przetwarzane zgodnie z <a href="https://kodilla.com/pl/polityka-prywatnosci">Polityką Prywatności</a>.</p>
                </div>
            </div>

            <div id="call-us-step2" style="display: none;">
                <h2>Wybierz dogodny termin i godzinę na rozmowę z doradcą</h2>
                <p>Krok <span>2/2:</span>
                </p><form action="https://kodilla.com/pl/call-us/step2" method="post" id="call-us-form2">
                    <div class="select-date">
                        <select name="date" id="call-us-input-date">
                        </select>
                        <select name="time" id="call-us-input-time">
                        </select>
                    </div>
                    <button class="btn btn-success" id="call-us-submit-call">Oddzwońcie do mnie!</button>
                </form>
            </div>

            <div id="call-us-step3" style="display: none;">
                <div class="thanks">
                    <i class="fa fa-check-circle" aria-hidden="true"></i>
                    <h2>Dziękujemy za zamowienie rozmowy! Do usłyszenia w wybranym terminie!</h2>
                </div>
            </div>
        </div>
    </div>
</div>



                <script src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/widget.js.pobrane"></script>
    <script type="text/javascript">
        window.fcSettings = {
            token: '99d7ec3c-0f50-4c9a-9f5e-b741bd6a1aa7',
            host: 'https://wchat.freshchat.com',
            locale: 'pl',
            tags: ["logged_in","bc_user","status_aktywny","jdp","jdp_2018-10","ppp","jdp_2018-10_aktywny_ppp"],
            faqTags: {
                tags: ["support"],
                filterType: 'category'
            },
            config: {
                content: {"placeholders":{"search_field":"Przeszukaj FAQ","reply_field":"Odpowiedz","csat_reply":"Wpisz swoj\u0105 odpowied\u017a"},"actions":{"csat_yes":"Tak","csat_no":"Nie","push_notify_yes":"Tak","push_notify_no":"Nie","tab_faq":"FAQ","tab_chat":"CHAT","csat_submit":"Wy\u015blij"},"headers":{"chat":"Napisz do nas","chat_help":"Witaj! W czy mo\u017cemy Ci pom\u00f3c?!","faq":"Baza wiedzy","faq_help":"Przegl\u0105daj FAQ","faq_not_available":"Brak artyku\u0142\u00f3w","faq_search_not_available":"Brak artyku\u0142\u00f3w dla frazy {{query}}","faq_useful":"Jak oceniasz przydatno\u015b\u0107?","faq_thankyou":"Dzi\u0119kujemy za Twoj\u0105 opini\u0119!","faq_message_us":"Napisz do nas!","push_notification":"Nie przegap \u017cadnej odpowiedzi! Zezwalasz na powiadomienia?","csat_question":"Czy uzyska\u0142e\u015b potrzebn\u0105 pomoc?","csat_yes_question":"Jak oceniasz nasze wsparcie?","csat_no_question":"Co mogliby\u015bmy ulepszy\u0107?","csat_thankyou":"Dzi\u0119kujemy Ci za informacje!","csat_rate_here":"Oce\u0144","channel_response":{"offline":"Aktualnie jeste\u015bmy nieobecni","online":{"minutes":{"one":"Odpowiadamy w mniej ni\u017c minut\u0119","more":"Odpowiadamy w mniej ni\u017c {{time}} minut(y)"},"hours":{"one":"Odpowiadamy w mniej ni\u017c godzin\u0119","more":"Odpowiadamy w mniej ni\u017c {{time}} godzin(y)"}}}}}
            }
        };
                    window.fcSettings.lastName = 'Socha';
            window.fcSettings.firstName = 'Tymoteusz';
            window.fcSettings.email = 't_socha@wp.pl';
            window.fcSettings.externalId = 't_socha@wp.pl';
                document.getElementsByTagName('body')[0].classList.add('chat-enabled');
        document.getElementsByTagName('body')[0].classList.add('chat-freshchat');
        window.fcWidget.init( window.fcSettings );
        window.fcWidget.on('widget:closed', function (){
            $('body').addClass('notification-content--visible');
        });
    </script><div id="fc_frame" class="fc-widget-normal"><iframe id="fc_widget" name="fc_widget" title="Chat" frameborder="0" src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/saved_resource.html"></iframe></div>
        <div data-role="notifications-wrapper" class="notifications-wrapper"></div>


<div id="fc_push_frame"><iframe id="fc_push" src="./Moduł_ 30. Rozszerzenie bazy danych o bardziej zaawansowane przypadki_files/index.html" frameborder="0"></iframe></div></body></html>